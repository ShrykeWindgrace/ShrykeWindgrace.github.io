<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"
    xmlns:dc="http://purl.org/dc/elements/1.1/">
    <channel>
        <title>SW's blogs</title>
        <link>shrykewindgrace.github.io</link>
        <description><![CDATA[Ramblings of a mathematician turned programmer]]></description>
        <atom:link href="shrykewindgrace.github.io/rss.xml" rel="self"
                   type="application/rss+xml" />
        <lastBuildDate>Sat, 19 Oct 2024 00:00:00 UT</lastBuildDate>
        <item>
    <title>Area of a particular triangle</title>
    <link>shrykewindgrace.github.io/posts/Seventh.html</link>
    <description><![CDATA[<div class="info">
    Posted on October 19, 2024
    
        by me
    
</div>
<div class="info">
    
    Tags: <a title="All pages tagged &#39;maths&#39;." href="/tags/maths.html" rel="tag">maths</a>, <a title="All pages tagged &#39;tikz&#39;." href="/tags/tikz.html" rel="tag">tikz</a>
    
</div>
<h2 id="geometric-problem">Geometric problem</h2>
<p>I first saw this problem back in school when I was 15, so I do not claim to be the author.
One could argue that the <em>generalized</em> version of this problem is easier to solve.</p>
<p>I used this problem as an excuse to learn new things about <code>tikz</code> and <code>hakyll</code>.</p>
<h3 id="problem-statement">Problem statement</h3>
<p>Consider a triangle with its sides split with the following proportions:</p>
<p><span class="math display">\[
\frac {AY} {AB} = \frac{BX}{BC} = \frac {CZ}{CA} = \frac 13.
\]</span></p>
<p>Find the area of <span class="math inline">\(UVW\)</span> if the area of <span class="math inline">\(ABC\)</span> is equal to <span class="math inline">\(S\)</span>.</p>
<p><img src="data:image/svg+xml;utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%22342.615%22%20height%3D%22222.292%22%20viewBox%3D%220%200%20342.615%20222.292%22%3E%3Cdefs%3E%3Cg%3E%3Cg%20id%3D%22glyph-0-0%22%3E%3Cpath%20d%3D%22M%205.53125%20-9.953125%20C%205.46875%20-10.125%205.453125%20-10.203125%205.25%20-10.203125%20C%205.046875%20-10.203125%205.015625%20-10.171875%204.953125%20-9.9375%20L%201.953125%20-1.390625%20C%201.765625%20-0.796875%201.359375%20-0.421875%200.4375%20-0.421875%20L%200.4375%200%20C%201.3125%20-0.03125%201.34375%20-0.03125%201.8125%20-0.03125%20C%202.21875%20-0.03125%202.90625%20-0.03125%203.28125%200%20L%203.28125%20-0.421875%20C%202.671875%20-0.421875%202.3125%20-0.734375%202.3125%20-1.125%20C%202.3125%20-1.21875%202.3125%20-1.25%202.390625%20-1.421875%20L%203.046875%20-3.328125%20L%206.640625%20-3.328125%20L%207.4375%20-1.09375%20C%207.5%20-0.921875%207.5%20-0.890625%207.5%20-0.84375%20C%207.5%20-0.421875%206.78125%20-0.421875%206.421875%20-0.421875%20L%206.421875%200%20C%206.75%20-0.03125%207.875%20-0.03125%208.28125%20-0.03125%20C%208.671875%20-0.03125%209.703125%20-0.03125%2010.03125%200%20L%2010.03125%20-0.421875%20C%209.109375%20-0.421875%208.84375%20-0.421875%208.65625%20-1%20Z%20M%204.84375%20-8.5%20L%206.5%20-3.75%20L%203.1875%20-3.75%20Z%20M%204.84375%20-8.5%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-1%22%3E%3Cpath%20d%3D%22M%200.609375%20-9.765625%20L%200.609375%20-9.34375%20L%200.90625%20-9.34375%20C%201.9375%20-9.34375%201.96875%20-9.203125%201.96875%20-8.671875%20L%201.96875%20-1.09375%20C%201.96875%20-0.5625%201.9375%20-0.421875%200.90625%20-0.421875%20L%200.609375%20-0.421875%20L%200.609375%200%20L%205.984375%200%20C%207.828125%200%209.125%20-1.25%209.125%20-2.609375%20C%209.125%20-3.78125%208.078125%20-4.921875%206.375%20-5.109375%20C%207.734375%20-5.359375%208.71875%20-6.28125%208.71875%20-7.34375%20C%208.71875%20-8.578125%207.484375%20-9.765625%205.609375%20-9.765625%20Z%20M%203.0625%20-5.21875%20L%203.0625%20-8.78125%20C%203.0625%20-9.25%203.09375%20-9.34375%203.71875%20-9.34375%20L%205.515625%20-9.34375%20C%206.953125%20-9.34375%207.46875%20-8.125%207.46875%20-7.34375%20C%207.46875%20-6.40625%206.71875%20-5.21875%205.125%20-5.21875%20Z%20M%203.71875%20-0.421875%20C%203.09375%20-0.421875%203.0625%20-0.515625%203.0625%20-0.984375%20L%203.0625%20-4.9375%20L%205.734375%20-4.9375%20C%207.109375%20-4.9375%207.828125%20-3.734375%207.828125%20-2.625%20C%207.828125%20-1.46875%206.953125%20-0.421875%205.546875%20-0.421875%20Z%20M%203.71875%20-0.421875%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-2%22%3E%3Cpath%20d%3D%22M%209.328125%20-9.734375%20C%209.328125%20-10%209.328125%20-10.0625%209.171875%20-10.0625%20C%209.09375%20-10.0625%209.078125%20-10.03125%209%20-9.890625%20L%208.296875%20-8.765625%20C%207.65625%20-9.5625%206.671875%20-10.0625%205.640625%20-10.0625%20C%203.03125%20-10.0625%200.765625%20-7.8125%200.765625%20-4.890625%20C%200.765625%20-1.9375%203.0625%200.296875%205.640625%200.296875%20C%207.984375%200.296875%209.328125%20-1.75%209.328125%20-3.3125%20C%209.328125%20-3.46875%209.328125%20-3.5625%209.171875%20-3.5625%20C%209.015625%20-3.5625%209%20-3.484375%209%20-3.390625%20C%208.875%20-1.109375%207.21875%20-0.109375%205.828125%20-0.109375%20C%204.828125%20-0.109375%202.109375%20-0.71875%202.109375%20-4.890625%20C%202.109375%20-9.015625%204.796875%20-9.65625%205.8125%20-9.65625%20C%207.3125%20-9.65625%208.640625%20-8.375%208.921875%20-6.234375%20C%208.953125%20-6.0625%208.953125%20-6.015625%209.125%20-6.015625%20C%209.328125%20-6.015625%209.328125%20-6.0625%209.328125%20-6.34375%20Z%20M%209.328125%20-9.734375%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-3%22%3E%3Cpath%20d%3D%22M%205.59375%20-5.484375%20L%207.5625%20-8.359375%20C%207.8125%20-8.703125%208.21875%20-9.328125%209.578125%20-9.34375%20L%209.578125%20-9.765625%20C%208.96875%20-9.734375%208.8125%20-9.734375%208.078125%20-9.734375%20C%207.6875%20-9.734375%206.78125%20-9.734375%206.453125%20-9.765625%20L%206.453125%20-9.34375%20C%207.03125%20-9.3125%207.21875%20-8.96875%207.21875%20-8.71875%20C%207.21875%20-8.5625%207.15625%20-8.484375%207.078125%20-8.34375%20L%205.359375%20-5.828125%20L%203.4375%20-8.6875%20C%203.390625%20-8.75%203.328125%20-8.84375%203.328125%20-8.921875%20C%203.328125%20-9.125%203.625%20-9.34375%204.140625%20-9.34375%20L%204.140625%20-9.765625%20C%203.796875%20-9.734375%202.671875%20-9.734375%202.265625%20-9.734375%20C%201.859375%20-9.734375%200.859375%20-9.734375%200.515625%20-9.765625%20L%200.515625%20-9.34375%20C%201.59375%20-9.34375%201.734375%20-9.28125%202.03125%20-8.828125%20L%204.703125%20-4.859375%20L%202.296875%20-1.359375%20C%202.0625%20-1%201.59375%20-0.421875%200.3125%20-0.421875%20L%200.3125%200%20C%200.921875%20-0.03125%201.09375%20-0.03125%201.8125%20-0.03125%20C%202.203125%20-0.03125%203.125%20-0.03125%203.453125%200%20L%203.453125%20-0.421875%20C%202.859375%20-0.4375%202.671875%20-0.796875%202.671875%20-1.046875%20C%202.671875%20-1.203125%202.75%20-1.296875%202.828125%20-1.421875%20L%204.9375%20-4.5%20L%207.25%20-1.046875%20C%207.328125%20-0.921875%207.34375%20-0.90625%207.34375%20-0.84375%20C%207.34375%20-0.671875%207.09375%20-0.421875%206.53125%20-0.421875%20L%206.53125%200%20C%206.875%20-0.03125%207.984375%20-0.03125%208.40625%20-0.03125%20C%208.8125%20-0.03125%209.828125%20-0.03125%2010.171875%200%20L%2010.171875%20-0.421875%20C%209.328125%20-0.421875%208.984375%20-0.421875%208.65625%20-0.921875%20Z%20M%205.59375%20-5.484375%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-4%22%3E%3Cpath%20d%3D%22M%208.59375%20-8.421875%20C%209.0625%20-9.171875%209.71875%20-9.34375%2010.34375%20-9.34375%20L%2010.34375%20-9.765625%20C%209.53125%20-9.734375%209.5%20-9.734375%209%20-9.734375%20C%208.625%20-9.734375%207.90625%20-9.734375%207.546875%20-9.765625%20L%207.546875%20-9.34375%20C%207.96875%20-9.34375%208.265625%20-9.171875%208.265625%20-8.828125%20C%208.265625%20-8.640625%208.234375%20-8.59375%208.09375%20-8.359375%20L%205.671875%20-4.4375%20L%203.015625%20-8.734375%20C%202.9375%20-8.875%202.90625%20-8.921875%202.90625%20-9%20C%202.90625%20-9.3125%203.28125%20-9.34375%203.78125%20-9.34375%20L%203.78125%20-9.765625%20C%203.453125%20-9.734375%202.296875%20-9.734375%201.90625%20-9.734375%20C%201.5%20-9.734375%200.484375%20-9.734375%200.140625%20-9.765625%20L%200.140625%20-9.34375%20C%201.15625%20-9.34375%201.34375%20-9.3125%201.65625%20-8.796875%20L%204.671875%20-3.90625%20L%204.671875%20-1.09375%20C%204.671875%20-0.5625%204.625%20-0.421875%203.609375%20-0.421875%20L%203.3125%20-0.421875%20L%203.3125%200%20C%203.640625%20-0.03125%204.8125%20-0.03125%205.234375%20-0.03125%20C%205.640625%20-0.03125%206.8125%20-0.03125%207.15625%200%20L%207.15625%20-0.421875%20L%206.875%20-0.421875%20C%205.828125%20-0.421875%205.796875%20-0.5625%205.796875%20-1.0625%20L%205.796875%20-3.921875%20Z%20M%208.59375%20-8.421875%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-5%22%3E%3Cpath%20d%3D%22M%207.65625%20-9.265625%20C%207.765625%20-9.453125%207.765625%20-9.46875%207.765625%20-9.5625%20C%207.765625%20-9.765625%207.6875%20-9.765625%207.421875%20-9.765625%20L%201.125%20-9.765625%20L%200.96875%20-6.578125%20L%201.28125%20-6.578125%20C%201.390625%20-8.1875%201.828125%20-9.34375%204.140625%20-9.34375%20L%206.4375%20-9.34375%20L%200.765625%20-0.34375%20C%200.765625%20-0.015625%200.78125%200%201.109375%200%20L%207.609375%200%20L%207.828125%20-3.78125%20L%207.515625%20-3.78125%20C%207.421875%20-1.765625%207.125%20-0.4375%204.515625%20-0.4375%20L%202.109375%20-0.4375%20Z%20M%207.65625%20-9.265625%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-6%22%3E%3Cpath%20d%3D%22M%208.15625%20-3.28125%20C%208.15625%20-1.28125%206.796875%20-0.109375%205.453125%20-0.109375%20C%204.59375%20-0.109375%203.109375%20-0.6875%203.109375%20-3.1875%20L%203.109375%20-8.671875%20C%203.109375%20-9.203125%203.140625%20-9.34375%204.171875%20-9.34375%20L%204.453125%20-9.34375%20L%204.453125%20-9.765625%20C%204.125%20-9.734375%202.9375%20-9.734375%202.53125%20-9.734375%20C%202.109375%20-9.734375%200.921875%20-9.734375%200.59375%20-9.765625%20L%200.59375%20-9.34375%20L%200.875%20-9.34375%20C%201.90625%20-9.34375%201.9375%20-9.203125%201.9375%20-8.671875%20L%201.9375%20-3.28125%20C%201.9375%20-1.203125%203.609375%200.296875%205.421875%200.296875%20C%207.40625%200.296875%208.53125%20-1.640625%208.53125%20-3.078125%20L%208.53125%20-8.484375%20C%208.53125%20-9.34375%209.640625%20-9.34375%209.890625%20-9.34375%20L%209.890625%20-9.765625%20C%209.515625%20-9.734375%208.75%20-9.734375%208.34375%20-9.734375%20C%207.9375%20-9.734375%207.15625%20-9.734375%206.796875%20-9.765625%20L%206.796875%20-9.34375%20C%208.15625%20-9.34375%208.15625%20-8.671875%208.15625%20-8.296875%20Z%20M%208.15625%20-3.28125%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-7%22%3E%3Cpath%20d%3D%22M%208.734375%20-8.34375%20C%208.859375%20-8.703125%209.109375%20-9.328125%2010.21875%20-9.34375%20L%2010.21875%20-9.765625%20C%209.5%20-9.734375%209.46875%20-9.734375%208.90625%20-9.734375%20C%208.515625%20-9.734375%207.8125%20-9.734375%207.453125%20-9.765625%20L%207.453125%20-9.34375%20C%208.171875%20-9.328125%208.390625%20-8.9375%208.390625%20-8.65625%20C%208.390625%20-8.5625%208.390625%20-8.53125%208.3125%20-8.328125%20L%205.640625%20-1.28125%20L%202.8125%20-8.71875%20C%202.75%20-8.875%202.75%20-8.90625%202.75%20-8.9375%20C%202.75%20-9.34375%203.453125%20-9.34375%203.8125%20-9.34375%20L%203.8125%20-9.765625%20C%203.46875%20-9.734375%202.390625%20-9.734375%201.96875%20-9.734375%20C%201.578125%20-9.734375%200.59375%20-9.734375%200.25%20-9.765625%20L%200.25%20-9.34375%20C%201.140625%20-9.34375%201.375%20-9.34375%201.59375%20-8.78125%20L%204.9375%200.03125%20C%205%200.234375%205.03125%200.296875%205.234375%200.296875%20C%205.4375%200.296875%205.453125%200.25%205.546875%200.015625%20Z%20M%208.734375%20-8.34375%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-8%22%3E%3Cpath%20d%3D%22M%2012.765625%20-8.359375%20C%2013%20-9.046875%2013.40625%20-9.328125%2014.125%20-9.34375%20L%2014.125%20-9.765625%20C%2013.515625%20-9.734375%2013.484375%20-9.734375%2012.859375%20-9.734375%20C%2012.484375%20-9.734375%2011.703125%20-9.734375%2011.359375%20-9.765625%20L%2011.359375%20-9.34375%20C%2012.234375%20-9.328125%2012.5%20-8.875%2012.5%20-8.59375%20C%2012.5%20-8.515625%2012.453125%20-8.40625%2012.421875%20-8.3125%20L%2010.25%20-1.53125%20L%207.9375%20-8.71875%20C%207.921875%20-8.765625%207.890625%20-8.875%207.890625%20-8.921875%20C%207.890625%20-9.34375%208.65625%20-9.34375%209%20-9.34375%20L%209%20-9.765625%20C%208.65625%20-9.734375%207.59375%20-9.734375%207.171875%20-9.734375%20C%206.765625%20-9.734375%205.890625%20-9.734375%205.515625%20-9.765625%20L%205.515625%20-9.34375%20C%206.28125%20-9.34375%206.46875%20-9.3125%206.640625%20-9.046875%20C%206.734375%20-8.859375%206.828125%20-8.421875%207.015625%20-7.90625%20L%204.96875%20-1.53125%20L%202.6875%20-8.65625%20C%202.609375%20-8.84375%202.609375%20-8.875%202.609375%20-8.921875%20C%202.609375%20-9.34375%203.34375%20-9.34375%203.71875%20-9.34375%20L%203.71875%20-9.765625%20C%203.390625%20-9.734375%202.296875%20-9.734375%201.90625%20-9.734375%20C%201.484375%20-9.734375%200.609375%20-9.734375%200.25%20-9.765625%20L%200.25%20-9.34375%20C%201.015625%20-9.34375%201.28125%20-9.34375%201.453125%20-8.8125%20L%204.28125%200.03125%20C%204.359375%200.25%204.421875%200.296875%204.546875%200.296875%20C%204.65625%200.296875%204.734375%200.25%204.796875%200.046875%20L%207.171875%20-7.375%20L%209.5625%200.046875%20C%209.640625%200.25%209.703125%200.296875%209.828125%200.296875%20C%209.953125%200.296875%2010%200.25%2010.078125%200.03125%20Z%20M%2012.765625%20-8.359375%20%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3CclipPath%20id%3D%22clip-0%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%2013%2012%20L%20330%2012%20L%20330%20221.585938%20L%2013%20221.585938%20Z%20M%2013%2012%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-1%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%2013%20147%20L%20308%20147%20L%20308%20221.585938%20L%2013%20221.585938%20Z%20M%2013%20147%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-2%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%20114%2012%20L%20262%2012%20L%20262%20221.585938%20L%20114%20221.585938%20Z%20M%20114%2012%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-3%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%20171%2079%20L%20330%2079%20L%20330%20221.585938%20L%20171%20221.585938%20Z%20M%20171%2079%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-4%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%2018%20220%20L%2020%20220%20L%2020%20221.585938%20L%2018%20221.585938%20Z%20M%2018%20220%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-5%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%20323%20220%20L%20325%20220%20L%20325%20221.585938%20L%20323%20221.585938%20Z%20M%20323%20220%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-6%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%20120%20220%20L%20121%20220%20L%20121%20221.585938%20L%20120%20221.585938%20Z%20M%20120%20220%20%22%2F%3E%3C%2FclipPath%3E%3C%2Fdefs%3E%3Cg%20clip-path%3D%22url%28%23clip-0%29%22%3E%3Cpath%20fill%3D%22none%22%20stroke-width%3D%220.3985%22%20stroke-linecap%3D%22butt%22%20stroke-linejoin%3D%22miter%22%20stroke%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20stroke-opacity%3D%221%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M%20-0.00194049%200.00101783%20L%20306.137988%200.00101783%20L%20238.105587%20204.090385%20L%20-0.00194049%200.00101783%20%22%20transform%3D%22matrix%280.996825%2C%200%2C%200%2C%20-0.996825%2C%2018.826153%2C%20221.188515%29%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-1%29%22%3E%3Cpath%20fill%3D%22none%22%20stroke-width%3D%220.3985%22%20stroke-linecap%3D%22butt%22%20stroke-linejoin%3D%22miter%22%20stroke%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20stroke-opacity%3D%221%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M%20-0.00194049%200.00101783%20L%20283.460521%2068.029501%20%22%20transform%3D%22matrix%280.996825%2C%200%2C%200%2C%20-0.996825%2C%2018.826153%2C%20221.188515%29%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-2%29%22%3E%3Cpath%20fill%3D%22none%22%20stroke-width%3D%220.3985%22%20stroke-linecap%3D%22butt%22%20stroke-linejoin%3D%22miter%22%20stroke%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20stroke-opacity%3D%221%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M%20238.105587%20204.090385%20L%20102.044702%200.00101783%20%22%20transform%3D%22matrix%280.996825%2C%200%2C%200%2C%20-0.996825%2C%2018.826153%2C%20221.188515%29%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-3%29%22%3E%3Cpath%20fill%3D%22none%22%20stroke-width%3D%220.3985%22%20stroke-linecap%3D%22butt%22%20stroke-linejoin%3D%22miter%22%20stroke%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20stroke-opacity%3D%221%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M%20306.137988%200.00101783%20L%20158.736411%20136.061902%20%22%20transform%3D%22matrix%280.996825%2C%200%2C%200%2C%20-0.996825%2C%2018.826153%2C%20221.188515%29%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-4%29%22%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%2019.222656%20221.1875%20C%2019.222656%20220.96875%2019.046875%20220.792969%2018.824219%20220.792969%20C%2018.605469%20220.792969%2018.429688%20220.96875%2018.429688%20221.1875%20C%2018.429688%20221.40625%2018.605469%20221.585938%2018.824219%20221.585938%20C%2019.046875%20221.585938%2019.222656%20221.40625%2019.222656%20221.1875%20Z%20M%2019.222656%20221.1875%20%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-0%22%20x%3D%224.241605%22%20y%3D%22217.101532%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-5%29%22%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20324.386719%20221.1875%20C%20324.386719%20220.96875%20324.210938%20220.792969%20323.992188%20220.792969%20C%20323.769531%20220.792969%20323.59375%20220.96875%20323.59375%20221.1875%20C%20323.59375%20221.40625%20323.769531%20221.585938%20323.992188%20221.585938%20C%20324.210938%20221.585938%20324.386719%20221.40625%20324.386719%20221.1875%20Z%20M%20324.386719%20221.1875%20%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-1%22%20x%3D%22328.074198%22%20y%3D%22217.101532%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20256.574219%2017.746094%20C%20256.574219%2017.527344%20256.394531%2017.347656%20256.175781%2017.347656%20C%20255.957031%2017.347656%20255.777344%2017.527344%20255.777344%2017.746094%20C%20255.777344%2017.964844%20255.957031%2018.144531%20256.175781%2018.144531%20C%20256.394531%2018.144531%20256.574219%2017.964844%20256.574219%2017.746094%20Z%20M%20256.574219%2017.746094%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-2%22%20x%3D%22260.260186%22%20y%3D%2213.661488%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20301.78125%20153.375%20C%20301.78125%20153.15625%20301.605469%20152.976562%20301.386719%20152.976562%20C%20301.167969%20152.976562%20300.988281%20153.15625%20300.988281%20153.375%20C%20300.988281%20153.59375%20301.167969%20153.773438%20301.386719%20153.773438%20C%20301.605469%20153.773438%20301.78125%20153.59375%20301.78125%20153.375%20Z%20M%20301.78125%20153.375%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-3%22%20x%3D%22305.469195%22%20y%3D%22149.286522%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-6%29%22%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20120.945312%20221.1875%20C%20120.945312%20220.96875%20120.765625%20220.792969%20120.546875%20220.792969%20C%20120.328125%20220.792969%20120.148438%20220.96875%20120.148438%20221.1875%20C%20120.148438%20221.40625%20120.328125%20221.585938%20120.546875%20221.585938%20C%20120.765625%20221.585938%20120.945312%20221.40625%20120.945312%20221.1875%20Z%20M%20120.945312%20221.1875%20%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-4%22%20x%3D%22105.961627%22%20y%3D%22217.101532%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20177.457031%2085.558594%20C%20177.457031%2085.339844%20177.277344%2085.164062%20177.058594%2085.164062%20C%20176.839844%2085.164062%20176.664062%2085.339844%20176.664062%2085.558594%20C%20176.664062%2085.78125%20176.839844%2085.957031%20177.058594%2085.957031%20C%20177.277344%2085.957031%20177.457031%2085.78125%20177.457031%2085.558594%20Z%20M%20177.457031%2085.558594%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-5%22%20x%3D%22164.412461%22%20y%3D%2281.474504%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20140.320312%20192.125%20C%20140.320312%20191.90625%20140.140625%20191.726562%20139.921875%20191.726562%20C%20139.703125%20191.726562%20139.523438%20191.90625%20139.523438%20192.125%20C%20139.523438%20192.34375%20139.703125%20192.523438%20139.921875%20192.523438%20C%20140.140625%20192.523438%20140.320312%20192.34375%20140.320312%20192.125%20Z%20M%20140.320312%20192.125%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-6%22%20x%3D%22125.334923%22%20y%3D%22188.039095%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20261.414062%20163.0625%20C%20261.414062%20162.84375%20261.238281%20162.664062%20261.015625%20162.664062%20C%20260.796875%20162.664062%20260.621094%20162.84375%20260.621094%20163.0625%20C%20260.621094%20163.28125%20260.796875%20163.460938%20261.015625%20163.460938%20C%20261.238281%20163.460938%20261.414062%20163.28125%20261.414062%20163.0625%20Z%20M%20261.414062%20163.0625%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-7%22%20x%3D%22255.765501%22%20y%3D%22158.975663%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20198.445312%20104.9375%20C%20198.445312%20104.71875%20198.269531%20104.542969%20198.046875%20104.542969%20C%20197.828125%20104.542969%20197.652344%20104.71875%20197.652344%20104.9375%20C%20197.652344%20105.15625%20197.828125%20105.335938%20198.046875%20105.335938%20C%20198.269531%20105.335938%20198.445312%20105.15625%20198.445312%20104.9375%20Z%20M%20198.445312%20104.9375%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-8%22%20x%3D%22202.13332%22%20y%3D%22109.8272%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%2875%25%2C%2075%25%2C%2075%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20139.921875%20192.125%20L%20261.015625%20163.0625%20L%20198.046875%20104.941406%20Z%20M%20139.921875%20192.125%20%22%2F%3E%3C%2Fsvg%3E" class="tikzpicture" /></p>
<h3 id="solution">Solution</h3>
<p>From the very beginning we replace <span class="math inline">\(\frac 13\)</span> by <span class="math inline">\(\alpha \in [0,1/2]\)</span>. Just to make things spicy.</p>
<p>Let’s denote the areas of the parts of the triangle <span class="math inline">\(ABC\)</span> as follows:</p>
<p><img src="data:image/svg+xml;utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%22342.61%22%20height%3D%22222.289%22%20viewBox%3D%220%200%20342.61%20222.289%22%3E%3Cdefs%3E%3Cg%3E%3Cg%20id%3D%22glyph-0-0%22%3E%3Cpath%20d%3D%22M%205.53125%20-9.953125%20C%205.46875%20-10.125%205.453125%20-10.203125%205.25%20-10.203125%20C%205.046875%20-10.203125%205.015625%20-10.171875%204.953125%20-9.9375%20L%201.953125%20-1.390625%20C%201.765625%20-0.796875%201.359375%20-0.421875%200.4375%20-0.421875%20L%200.4375%200%20C%201.3125%20-0.03125%201.34375%20-0.03125%201.8125%20-0.03125%20C%202.21875%20-0.03125%202.90625%20-0.03125%203.28125%200%20L%203.28125%20-0.421875%20C%202.671875%20-0.421875%202.3125%20-0.734375%202.3125%20-1.125%20C%202.3125%20-1.21875%202.3125%20-1.25%202.390625%20-1.421875%20L%203.046875%20-3.328125%20L%206.640625%20-3.328125%20L%207.4375%20-1.09375%20C%207.5%20-0.921875%207.5%20-0.890625%207.5%20-0.84375%20C%207.5%20-0.421875%206.78125%20-0.421875%206.421875%20-0.421875%20L%206.421875%200%20C%206.75%20-0.03125%207.875%20-0.03125%208.28125%20-0.03125%20C%208.671875%20-0.03125%209.703125%20-0.03125%2010.03125%200%20L%2010.03125%20-0.421875%20C%209.109375%20-0.421875%208.84375%20-0.421875%208.65625%20-1%20Z%20M%204.84375%20-8.5%20L%206.5%20-3.75%20L%203.1875%20-3.75%20Z%20M%204.84375%20-8.5%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-1%22%3E%3Cpath%20d%3D%22M%200.609375%20-9.765625%20L%200.609375%20-9.34375%20L%200.90625%20-9.34375%20C%201.9375%20-9.34375%201.96875%20-9.203125%201.96875%20-8.671875%20L%201.96875%20-1.09375%20C%201.96875%20-0.5625%201.9375%20-0.421875%200.90625%20-0.421875%20L%200.609375%20-0.421875%20L%200.609375%200%20L%205.984375%200%20C%207.828125%200%209.125%20-1.25%209.125%20-2.609375%20C%209.125%20-3.78125%208.078125%20-4.921875%206.375%20-5.109375%20C%207.734375%20-5.359375%208.71875%20-6.28125%208.71875%20-7.34375%20C%208.71875%20-8.578125%207.484375%20-9.765625%205.609375%20-9.765625%20Z%20M%203.0625%20-5.21875%20L%203.0625%20-8.78125%20C%203.0625%20-9.25%203.09375%20-9.34375%203.71875%20-9.34375%20L%205.515625%20-9.34375%20C%206.953125%20-9.34375%207.46875%20-8.125%207.46875%20-7.34375%20C%207.46875%20-6.40625%206.71875%20-5.21875%205.125%20-5.21875%20Z%20M%203.71875%20-0.421875%20C%203.09375%20-0.421875%203.0625%20-0.515625%203.0625%20-0.984375%20L%203.0625%20-4.9375%20L%205.734375%20-4.9375%20C%207.109375%20-4.9375%207.828125%20-3.734375%207.828125%20-2.625%20C%207.828125%20-1.46875%206.953125%20-0.421875%205.546875%20-0.421875%20Z%20M%203.71875%20-0.421875%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-2%22%3E%3Cpath%20d%3D%22M%209.328125%20-9.734375%20C%209.328125%20-10%209.328125%20-10.0625%209.171875%20-10.0625%20C%209.09375%20-10.0625%209.078125%20-10.03125%209%20-9.890625%20L%208.296875%20-8.765625%20C%207.65625%20-9.5625%206.671875%20-10.0625%205.640625%20-10.0625%20C%203.03125%20-10.0625%200.765625%20-7.8125%200.765625%20-4.890625%20C%200.765625%20-1.9375%203.0625%200.296875%205.640625%200.296875%20C%207.984375%200.296875%209.328125%20-1.75%209.328125%20-3.3125%20C%209.328125%20-3.46875%209.328125%20-3.5625%209.171875%20-3.5625%20C%209.015625%20-3.5625%209%20-3.484375%209%20-3.390625%20C%208.875%20-1.109375%207.21875%20-0.109375%205.828125%20-0.109375%20C%204.828125%20-0.109375%202.109375%20-0.71875%202.109375%20-4.890625%20C%202.109375%20-9.015625%204.796875%20-9.65625%205.8125%20-9.65625%20C%207.3125%20-9.65625%208.640625%20-8.375%208.921875%20-6.234375%20C%208.953125%20-6.0625%208.953125%20-6.015625%209.125%20-6.015625%20C%209.328125%20-6.015625%209.328125%20-6.0625%209.328125%20-6.34375%20Z%20M%209.328125%20-9.734375%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-3%22%3E%3Cpath%20d%3D%22M%205.59375%20-5.484375%20L%207.5625%20-8.359375%20C%207.8125%20-8.703125%208.21875%20-9.328125%209.578125%20-9.34375%20L%209.578125%20-9.765625%20C%208.96875%20-9.734375%208.8125%20-9.734375%208.078125%20-9.734375%20C%207.6875%20-9.734375%206.78125%20-9.734375%206.453125%20-9.765625%20L%206.453125%20-9.34375%20C%207.03125%20-9.3125%207.21875%20-8.96875%207.21875%20-8.71875%20C%207.21875%20-8.5625%207.15625%20-8.484375%207.078125%20-8.34375%20L%205.359375%20-5.828125%20L%203.4375%20-8.6875%20C%203.390625%20-8.75%203.328125%20-8.84375%203.328125%20-8.921875%20C%203.328125%20-9.125%203.625%20-9.34375%204.140625%20-9.34375%20L%204.140625%20-9.765625%20C%203.796875%20-9.734375%202.671875%20-9.734375%202.265625%20-9.734375%20C%201.859375%20-9.734375%200.859375%20-9.734375%200.515625%20-9.765625%20L%200.515625%20-9.34375%20C%201.59375%20-9.34375%201.734375%20-9.28125%202.03125%20-8.828125%20L%204.703125%20-4.859375%20L%202.296875%20-1.359375%20C%202.0625%20-1%201.59375%20-0.421875%200.3125%20-0.421875%20L%200.3125%200%20C%200.921875%20-0.03125%201.09375%20-0.03125%201.8125%20-0.03125%20C%202.203125%20-0.03125%203.125%20-0.03125%203.453125%200%20L%203.453125%20-0.421875%20C%202.859375%20-0.4375%202.671875%20-0.796875%202.671875%20-1.046875%20C%202.671875%20-1.203125%202.75%20-1.296875%202.828125%20-1.421875%20L%204.9375%20-4.5%20L%207.25%20-1.046875%20C%207.328125%20-0.921875%207.34375%20-0.90625%207.34375%20-0.84375%20C%207.34375%20-0.671875%207.09375%20-0.421875%206.53125%20-0.421875%20L%206.53125%200%20C%206.875%20-0.03125%207.984375%20-0.03125%208.40625%20-0.03125%20C%208.8125%20-0.03125%209.828125%20-0.03125%2010.171875%200%20L%2010.171875%20-0.421875%20C%209.328125%20-0.421875%208.984375%20-0.421875%208.65625%20-0.921875%20Z%20M%205.59375%20-5.484375%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-4%22%3E%3Cpath%20d%3D%22M%208.59375%20-8.421875%20C%209.0625%20-9.171875%209.71875%20-9.34375%2010.34375%20-9.34375%20L%2010.34375%20-9.765625%20C%209.53125%20-9.734375%209.5%20-9.734375%209%20-9.734375%20C%208.625%20-9.734375%207.90625%20-9.734375%207.546875%20-9.765625%20L%207.546875%20-9.34375%20C%207.96875%20-9.34375%208.265625%20-9.171875%208.265625%20-8.828125%20C%208.265625%20-8.640625%208.234375%20-8.59375%208.09375%20-8.359375%20L%205.671875%20-4.4375%20L%203.015625%20-8.734375%20C%202.9375%20-8.875%202.90625%20-8.921875%202.90625%20-9%20C%202.90625%20-9.3125%203.28125%20-9.34375%203.78125%20-9.34375%20L%203.78125%20-9.765625%20C%203.453125%20-9.734375%202.296875%20-9.734375%201.90625%20-9.734375%20C%201.5%20-9.734375%200.484375%20-9.734375%200.140625%20-9.765625%20L%200.140625%20-9.34375%20C%201.15625%20-9.34375%201.34375%20-9.3125%201.65625%20-8.796875%20L%204.671875%20-3.90625%20L%204.671875%20-1.09375%20C%204.671875%20-0.5625%204.625%20-0.421875%203.609375%20-0.421875%20L%203.3125%20-0.421875%20L%203.3125%200%20C%203.640625%20-0.03125%204.8125%20-0.03125%205.234375%20-0.03125%20C%205.640625%20-0.03125%206.8125%20-0.03125%207.15625%200%20L%207.15625%20-0.421875%20L%206.875%20-0.421875%20C%205.828125%20-0.421875%205.796875%20-0.5625%205.796875%20-1.0625%20L%205.796875%20-3.921875%20Z%20M%208.59375%20-8.421875%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-5%22%3E%3Cpath%20d%3D%22M%207.65625%20-9.265625%20C%207.765625%20-9.453125%207.765625%20-9.46875%207.765625%20-9.5625%20C%207.765625%20-9.765625%207.6875%20-9.765625%207.421875%20-9.765625%20L%201.125%20-9.765625%20L%200.96875%20-6.578125%20L%201.28125%20-6.578125%20C%201.390625%20-8.1875%201.828125%20-9.34375%204.140625%20-9.34375%20L%206.4375%20-9.34375%20L%200.765625%20-0.34375%20C%200.765625%20-0.015625%200.78125%200%201.109375%200%20L%207.609375%200%20L%207.828125%20-3.78125%20L%207.515625%20-3.78125%20C%207.421875%20-1.765625%207.125%20-0.4375%204.515625%20-0.4375%20L%202.109375%20-0.4375%20Z%20M%207.65625%20-9.265625%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-6%22%3E%3Cpath%20d%3D%22M%208.15625%20-3.28125%20C%208.15625%20-1.28125%206.796875%20-0.109375%205.453125%20-0.109375%20C%204.59375%20-0.109375%203.109375%20-0.6875%203.109375%20-3.1875%20L%203.109375%20-8.671875%20C%203.109375%20-9.203125%203.140625%20-9.34375%204.171875%20-9.34375%20L%204.453125%20-9.34375%20L%204.453125%20-9.765625%20C%204.125%20-9.734375%202.9375%20-9.734375%202.53125%20-9.734375%20C%202.109375%20-9.734375%200.921875%20-9.734375%200.59375%20-9.765625%20L%200.59375%20-9.34375%20L%200.875%20-9.34375%20C%201.90625%20-9.34375%201.9375%20-9.203125%201.9375%20-8.671875%20L%201.9375%20-3.28125%20C%201.9375%20-1.203125%203.609375%200.296875%205.421875%200.296875%20C%207.40625%200.296875%208.53125%20-1.640625%208.53125%20-3.078125%20L%208.53125%20-8.484375%20C%208.53125%20-9.34375%209.640625%20-9.34375%209.890625%20-9.34375%20L%209.890625%20-9.765625%20C%209.515625%20-9.734375%208.75%20-9.734375%208.34375%20-9.734375%20C%207.9375%20-9.734375%207.15625%20-9.734375%206.796875%20-9.765625%20L%206.796875%20-9.34375%20C%208.15625%20-9.34375%208.15625%20-8.671875%208.15625%20-8.296875%20Z%20M%208.15625%20-3.28125%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-7%22%3E%3Cpath%20d%3D%22M%208.734375%20-8.34375%20C%208.859375%20-8.703125%209.109375%20-9.328125%2010.21875%20-9.34375%20L%2010.21875%20-9.765625%20C%209.5%20-9.734375%209.46875%20-9.734375%208.90625%20-9.734375%20C%208.515625%20-9.734375%207.8125%20-9.734375%207.453125%20-9.765625%20L%207.453125%20-9.34375%20C%208.171875%20-9.328125%208.390625%20-8.9375%208.390625%20-8.65625%20C%208.390625%20-8.5625%208.390625%20-8.53125%208.3125%20-8.328125%20L%205.640625%20-1.28125%20L%202.8125%20-8.71875%20C%202.75%20-8.875%202.75%20-8.90625%202.75%20-8.9375%20C%202.75%20-9.34375%203.453125%20-9.34375%203.8125%20-9.34375%20L%203.8125%20-9.765625%20C%203.46875%20-9.734375%202.390625%20-9.734375%201.96875%20-9.734375%20C%201.578125%20-9.734375%200.59375%20-9.734375%200.25%20-9.765625%20L%200.25%20-9.34375%20C%201.140625%20-9.34375%201.375%20-9.34375%201.59375%20-8.78125%20L%204.9375%200.03125%20C%205%200.234375%205.03125%200.296875%205.234375%200.296875%20C%205.4375%200.296875%205.453125%200.25%205.546875%200.015625%20Z%20M%208.734375%20-8.34375%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-0-8%22%3E%3Cpath%20d%3D%22M%2012.765625%20-8.359375%20C%2013%20-9.046875%2013.40625%20-9.328125%2014.125%20-9.34375%20L%2014.125%20-9.765625%20C%2013.515625%20-9.734375%2013.484375%20-9.734375%2012.859375%20-9.734375%20C%2012.484375%20-9.734375%2011.703125%20-9.734375%2011.359375%20-9.765625%20L%2011.359375%20-9.34375%20C%2012.234375%20-9.328125%2012.5%20-8.875%2012.5%20-8.59375%20C%2012.5%20-8.515625%2012.453125%20-8.40625%2012.421875%20-8.3125%20L%2010.25%20-1.53125%20L%207.9375%20-8.71875%20C%207.921875%20-8.765625%207.890625%20-8.875%207.890625%20-8.921875%20C%207.890625%20-9.34375%208.65625%20-9.34375%209%20-9.34375%20L%209%20-9.765625%20C%208.65625%20-9.734375%207.59375%20-9.734375%207.171875%20-9.734375%20C%206.765625%20-9.734375%205.890625%20-9.734375%205.515625%20-9.765625%20L%205.515625%20-9.34375%20C%206.28125%20-9.34375%206.46875%20-9.3125%206.640625%20-9.046875%20C%206.734375%20-8.859375%206.828125%20-8.421875%207.015625%20-7.90625%20L%204.96875%20-1.53125%20L%202.6875%20-8.65625%20C%202.609375%20-8.84375%202.609375%20-8.875%202.609375%20-8.921875%20C%202.609375%20-9.34375%203.34375%20-9.34375%203.71875%20-9.34375%20L%203.71875%20-9.765625%20C%203.390625%20-9.734375%202.296875%20-9.734375%201.90625%20-9.734375%20C%201.484375%20-9.734375%200.609375%20-9.734375%200.25%20-9.765625%20L%200.25%20-9.34375%20C%201.015625%20-9.34375%201.28125%20-9.34375%201.453125%20-8.8125%20L%204.28125%200.03125%20C%204.359375%200.25%204.421875%200.296875%204.546875%200.296875%20C%204.65625%200.296875%204.734375%200.25%204.796875%200.046875%20L%207.171875%20-7.375%20L%209.5625%200.046875%20C%209.640625%200.25%209.703125%200.296875%209.828125%200.296875%20C%209.953125%200.296875%2010%200.25%2010.078125%200.03125%20Z%20M%2012.765625%20-8.359375%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-1-0%22%3E%3Cpath%20d%3D%22M%204.609375%20-3.1875%20C%204.609375%20-3.828125%204.609375%20-4.296875%204.078125%20-4.765625%20C%203.65625%20-5.15625%203.125%20-5.3125%202.59375%20-5.3125%20C%201.625%20-5.3125%200.875%20-4.671875%200.875%20-3.90625%20C%200.875%20-3.546875%201.09375%20-3.390625%201.375%20-3.390625%20C%201.65625%20-3.390625%201.859375%20-3.59375%201.859375%20-3.875%20C%201.859375%20-4.359375%201.4375%20-4.359375%201.25%20-4.359375%20C%201.53125%20-4.859375%202.09375%20-5.078125%202.578125%20-5.078125%20C%203.125%20-5.078125%203.828125%20-4.625%203.828125%20-3.546875%20L%203.828125%20-3.078125%20C%201.4375%20-3.046875%200.53125%20-2.03125%200.53125%20-1.125%20C%200.53125%20-0.171875%201.625%200.125%202.34375%200.125%20C%203.140625%200.125%203.671875%20-0.359375%203.90625%20-0.9375%20C%203.953125%20-0.375%204.3125%200.0625%204.828125%200.0625%20C%205.078125%200.0625%205.765625%20-0.109375%205.765625%20-1.0625%20L%205.765625%20-1.734375%20L%205.515625%20-1.734375%20L%205.515625%20-1.0625%20C%205.515625%20-0.375%205.21875%20-0.28125%205.0625%20-0.28125%20C%204.609375%20-0.28125%204.609375%20-0.921875%204.609375%20-1.09375%20Z%20M%203.828125%20-1.6875%20C%203.828125%20-0.515625%202.953125%20-0.125%202.4375%20-0.125%20C%201.859375%20-0.125%201.375%20-0.546875%201.375%20-1.125%20C%201.375%20-2.6875%203.390625%20-2.84375%203.828125%20-2.859375%20Z%20M%203.828125%20-1.6875%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-1-1%22%3E%3Cpath%20d%3D%22M%204.3125%20-4.40625%20C%204.171875%20-4.40625%203.734375%20-4.40625%203.734375%20-3.921875%20C%203.734375%20-3.640625%203.9375%20-3.4375%204.21875%20-3.4375%20C%204.5%20-3.4375%204.71875%20-3.59375%204.71875%20-3.953125%20C%204.71875%20-4.75%203.890625%20-5.3125%202.921875%20-5.3125%20C%201.53125%20-5.3125%200.421875%20-4.078125%200.421875%20-2.578125%20C%200.421875%20-1.046875%201.5625%200.125%202.90625%200.125%20C%204.484375%200.125%204.84375%20-1.3125%204.84375%20-1.421875%20C%204.84375%20-1.53125%204.75%20-1.53125%204.71875%20-1.53125%20C%204.609375%20-1.53125%204.609375%20-1.484375%204.5625%20-1.34375%20C%204.296875%20-0.5%203.65625%20-0.140625%203.015625%20-0.140625%20C%202.28125%20-0.140625%201.328125%20-0.78125%201.328125%20-2.59375%20C%201.328125%20-4.5625%202.34375%20-5.0625%202.9375%20-5.0625%20C%203.390625%20-5.0625%204.046875%20-4.875%204.3125%20-4.40625%20Z%20M%204.3125%20-4.40625%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-1-2%22%3E%3Cpath%20d%3D%22M%201.421875%20-2.15625%20C%201.984375%20-1.78125%202.453125%20-1.78125%202.59375%20-1.78125%20C%203.65625%20-1.78125%204.453125%20-2.59375%204.453125%20-3.515625%20C%204.453125%20-3.84375%204.359375%20-4.296875%203.984375%20-4.671875%20C%204.453125%20-5.15625%205%20-5.15625%205.0625%20-5.15625%20C%205.109375%20-5.15625%205.171875%20-5.15625%205.21875%20-5.125%20C%205.109375%20-5.078125%205.046875%20-4.953125%205.046875%20-4.828125%20C%205.046875%20-4.65625%205.15625%20-4.515625%205.359375%20-4.515625%20C%205.453125%20-4.515625%205.65625%20-4.578125%205.65625%20-4.84375%20C%205.65625%20-5.0625%205.5%20-5.390625%205.078125%20-5.390625%20C%204.453125%20-5.390625%204%20-5%203.828125%20-4.828125%20C%203.46875%20-5.109375%203.046875%20-5.25%202.59375%20-5.25%20C%201.53125%20-5.25%200.734375%20-4.453125%200.734375%20-3.53125%20C%200.734375%20-2.84375%201.140625%20-2.40625%201.265625%20-2.296875%20C%201.125%20-2.125%200.90625%20-1.78125%200.90625%20-1.3125%20C%200.90625%20-0.625%201.328125%20-0.328125%201.421875%20-0.265625%20C%200.875%20-0.109375%200.328125%200.328125%200.328125%200.9375%20C%200.328125%201.765625%201.4375%202.4375%202.90625%202.4375%20C%204.328125%202.4375%205.515625%201.8125%205.515625%200.921875%20C%205.515625%200.625%205.421875%20-0.078125%204.703125%20-0.453125%20C%204.09375%20-0.765625%203.5%20-0.765625%202.484375%20-0.765625%20C%201.75%20-0.765625%201.671875%20-0.765625%201.453125%20-0.984375%20C%201.328125%20-1.109375%201.234375%20-1.328125%201.234375%20-1.578125%20C%201.234375%20-1.78125%201.296875%20-1.984375%201.421875%20-2.15625%20Z%20M%202.59375%20-2.03125%20C%201.546875%20-2.03125%201.546875%20-3.25%201.546875%20-3.515625%20C%201.546875%20-3.734375%201.546875%20-4.21875%201.75%20-4.546875%20C%201.984375%20-4.890625%202.34375%20-5%202.59375%20-5%20C%203.640625%20-5%203.640625%20-3.796875%203.640625%20-3.53125%20C%203.640625%20-3.3125%203.640625%20-2.828125%203.4375%20-2.5%20C%203.203125%20-2.15625%202.84375%20-2.03125%202.59375%20-2.03125%20Z%20M%202.921875%202.1875%20C%201.78125%202.1875%200.90625%201.609375%200.90625%200.9375%20C%200.90625%200.828125%200.9375%200.375%201.390625%200.0625%20C%201.640625%20-0.109375%201.75%20-0.109375%202.59375%20-0.109375%20C%203.578125%20-0.109375%204.921875%20-0.109375%204.921875%200.9375%20C%204.921875%201.640625%204.015625%202.1875%202.921875%202.1875%20Z%20M%202.921875%202.1875%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-1-3%22%3E%3Cpath%20d%3D%22M%201.984375%20-8.28125%20L%200.328125%20-8.140625%20L%200.328125%20-7.796875%20C%201.140625%20-7.796875%201.234375%20-7.71875%201.234375%20-7.125%20L%201.234375%200%20L%201.5%200%20C%201.546875%20-0.09375%201.890625%20-0.6875%201.9375%20-0.78125%20C%202.203125%20-0.328125%202.71875%200.125%203.484375%200.125%20C%204.859375%200.125%206.0625%20-1.03125%206.0625%20-2.578125%20C%206.0625%20-4.09375%204.9375%20-5.25%203.609375%20-5.25%20C%202.953125%20-5.25%202.390625%20-4.953125%201.984375%20-4.453125%20Z%20M%202.015625%20-3.8125%20C%202.015625%20-4.03125%202.015625%20-4.046875%202.140625%20-4.25%20C%202.4375%20-4.671875%202.953125%20-5.015625%203.546875%20-5.015625%20C%203.90625%20-5.015625%205.15625%20-4.875%205.15625%20-2.59375%20C%205.15625%20-1.78125%205.03125%20-1.28125%204.75%20-0.859375%20C%204.5%20-0.484375%204.03125%20-0.125%203.4375%20-0.125%20C%202.796875%20-0.125%202.375%20-0.53125%202.171875%20-0.859375%20C%202.015625%20-1.109375%202.015625%20-1.15625%202.015625%20-1.359375%20Z%20M%202.015625%20-3.8125%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-1-4%22%3E%3Cpath%20d%3D%22M%203.578125%20-8.140625%20L%203.578125%20-7.796875%20C%204.390625%20-7.796875%204.484375%20-7.71875%204.484375%20-7.125%20L%204.484375%20-4.5%20C%204.234375%20-4.84375%203.71875%20-5.25%203%20-5.25%20C%201.609375%20-5.25%200.421875%20-4.09375%200.421875%20-2.5625%20C%200.421875%20-1.046875%201.546875%200.125%202.859375%200.125%20C%203.765625%200.125%204.296875%20-0.484375%204.453125%20-0.703125%20L%204.453125%200.125%20L%206.140625%200%20L%206.140625%20-0.34375%20C%205.328125%20-0.34375%205.234375%20-0.421875%205.234375%20-1.015625%20L%205.234375%20-8.28125%20Z%20M%204.453125%20-1.390625%20C%204.453125%20-1.1875%204.453125%20-1.140625%204.296875%20-0.875%20C%204%20-0.46875%203.515625%20-0.125%202.921875%20-0.125%20C%202.609375%20-0.125%201.328125%20-0.234375%201.328125%20-2.546875%20C%201.328125%20-3.40625%201.46875%20-3.890625%201.734375%20-4.28125%20C%201.96875%20-4.65625%202.4375%20-5.015625%203.046875%20-5.015625%20C%203.78125%20-5.015625%204.203125%20-4.484375%204.3125%20-4.296875%20C%204.453125%20-4.09375%204.453125%20-4.0625%204.453125%20-3.84375%20Z%20M%204.453125%20-1.390625%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-1-5%22%3E%3Cpath%20d%3D%22M%204.5625%20-2.765625%20C%204.828125%20-2.765625%204.859375%20-2.765625%204.859375%20-3%20C%204.859375%20-4.203125%204.203125%20-5.3125%202.765625%20-5.3125%20C%201.40625%20-5.3125%200.359375%20-4.09375%200.359375%20-2.609375%20C%200.359375%20-1.03125%201.578125%200.125%202.890625%200.125%20C%204.3125%200.125%204.859375%20-1.171875%204.859375%20-1.421875%20C%204.859375%20-1.484375%204.796875%20-1.53125%204.71875%20-1.53125%20C%204.625%20-1.53125%204.609375%20-1.484375%204.578125%20-1.421875%20C%204.265625%20-0.421875%203.46875%20-0.140625%202.96875%20-0.140625%20C%202.46875%20-0.140625%201.265625%20-0.484375%201.265625%20-2.546875%20L%201.265625%20-2.765625%20Z%20M%201.28125%20-3%20C%201.375%20-4.859375%202.421875%20-5.078125%202.75%20-5.078125%20C%204.03125%20-5.078125%204.09375%20-3.390625%204.109375%20-3%20Z%20M%201.28125%20-3%20%22%2F%3E%3C%2Fg%3E%3Cg%20id%3D%22glyph-1-6%22%3E%3Cpath%20d%3D%22M%202.046875%20-4.796875%20L%203.390625%20-4.796875%20L%203.390625%20-5.140625%20L%202.03125%20-5.140625%20L%202.03125%20-6.53125%20C%202.03125%20-7.609375%202.578125%20-8.15625%203.0625%20-8.15625%20C%203.15625%20-8.15625%203.34375%20-8.125%203.484375%20-8.0625%20C%203.4375%20-8.046875%203.140625%20-7.9375%203.140625%20-7.59375%20C%203.140625%20-7.3125%203.328125%20-7.125%203.59375%20-7.125%20C%203.890625%20-7.125%204.078125%20-7.3125%204.078125%20-7.609375%20C%204.078125%20-8.046875%203.640625%20-8.390625%203.078125%20-8.390625%20C%202.234375%20-8.390625%201.296875%20-7.75%201.296875%20-6.53125%20L%201.296875%20-5.140625%20L%200.375%20-5.140625%20L%200.375%20-4.796875%20L%201.296875%20-4.796875%20L%201.296875%20-0.875%20C%201.296875%20-0.34375%201.171875%20-0.34375%200.390625%20-0.34375%20L%200.390625%200%20C%200.734375%20-0.03125%201.390625%20-0.03125%201.734375%20-0.03125%20C%202.0625%20-0.03125%202.90625%20-0.03125%203.1875%200%20L%203.1875%20-0.34375%20L%202.9375%20-0.34375%20C%202.078125%20-0.34375%202.046875%20-0.484375%202.046875%20-0.90625%20Z%20M%202.046875%20-4.796875%20%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3CclipPath%20id%3D%22clip-0%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%2018%20192%20L%20140%20192%20L%20140%20221.582031%20L%2018%20221.582031%20Z%20M%2018%20192%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-1%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%20261%20153%20L%20324%20153%20L%20324%20221.582031%20L%20261%20221.582031%20Z%20M%20261%20153%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-2%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%2013%2012%20L%20330%2012%20L%20330%20221.582031%20L%2013%20221.582031%20Z%20M%2013%2012%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-3%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%2013%20147%20L%20307%20147%20L%20307%20221.582031%20L%2013%20221.582031%20Z%20M%2013%20147%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-4%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%20114%2012%20L%20262%2012%20L%20262%20221.582031%20L%20114%20221.582031%20Z%20M%20114%2012%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-5%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%20171%2079%20L%20330%2079%20L%20330%20221.582031%20L%20171%20221.582031%20Z%20M%20171%2079%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-6%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%2018%20220%20L%2020%20220%20L%2020%20221.582031%20L%2018%20221.582031%20Z%20M%2018%20220%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-7%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%20323%20220%20L%20325%20220%20L%20325%20221.582031%20L%20323%20221.582031%20Z%20M%20323%20220%20%22%2F%3E%3C%2FclipPath%3E%3CclipPath%20id%3D%22clip-8%22%3E%3Cpath%20clip-rule%3D%22nonzero%22%20d%3D%22M%20120%20220%20L%20121%20220%20L%20121%20221.582031%20L%20120%20221.582031%20Z%20M%20120%20220%20%22%2F%3E%3C%2FclipPath%3E%3C%2Fdefs%3E%3Cg%20clip-path%3D%22url%28%23clip-0%29%22%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%2879.998779%25%2C%2079.998779%25%2C%2079.998779%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20139.910156%20192.121094%20L%20120.539062%20221.183594%20L%2018.824219%20221.183594%20Z%20M%20139.910156%20192.121094%20%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%2879.998779%25%2C%2079.998779%25%2C%2079.998779%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20177.046875%2085.5625%20L%20256.167969%2017.746094%20L%20198.03125%20104.941406%20Z%20M%20177.046875%2085.5625%20%22%2F%3E%3Cg%20clip-path%3D%22url%28%23clip-1%29%22%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%2879.998779%25%2C%2079.998779%25%2C%2079.998779%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20301.363281%20153.375%20L%20261%20163.0625%20L%20323.980469%20221.183594%20Z%20M%20301.363281%20153.375%20%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%2875%25%2C%2075%25%2C%2075%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20139.910156%20192.121094%20L%20261%20163.0625%20L%20198.03125%20104.941406%20Z%20M%20139.910156%20192.121094%20%22%2F%3E%3Cg%20clip-path%3D%22url%28%23clip-2%29%22%3E%3Cpath%20fill%3D%22none%22%20stroke-width%3D%220.3985%22%20stroke-linecap%3D%22butt%22%20stroke-linejoin%3D%22miter%22%20stroke%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20stroke-opacity%3D%221%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M%20-0.00149695%20-0.00105807%20L%20306.130807%20-0.00105807%20L%20238.101406%20204.087145%20L%20-0.00149695%20-0.00105807%20%22%20transform%3D%22matrix%280.996812%2C%200%2C%200%2C%20-0.996812%2C%2018.825711%2C%20221.182539%29%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-3%29%22%3E%3Cpath%20fill%3D%22none%22%20stroke-width%3D%220.3985%22%20stroke-linecap%3D%22butt%22%20stroke-linejoin%3D%22miter%22%20stroke%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20stroke-opacity%3D%221%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M%20-0.00149695%20-0.00105807%20L%20283.441278%2068.024424%20%22%20transform%3D%22matrix%280.996812%2C%200%2C%200%2C%20-0.996812%2C%2018.825711%2C%20221.182539%29%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-4%29%22%3E%3Cpath%20fill%3D%22none%22%20stroke-width%3D%220.3985%22%20stroke-linecap%3D%22butt%22%20stroke-linejoin%3D%22miter%22%20stroke%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20stroke-opacity%3D%221%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M%20238.101406%20204.087145%20L%20102.038686%20-0.00105807%20%22%20transform%3D%22matrix%280.996812%2C%200%2C%200%2C%20-0.996812%2C%2018.825711%2C%20221.182539%29%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-5%29%22%3E%3Cpath%20fill%3D%22none%22%20stroke-width%3D%220.3985%22%20stroke-linecap%3D%22butt%22%20stroke-linejoin%3D%22miter%22%20stroke%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20stroke-opacity%3D%221%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M%20306.130807%20-0.00105807%20L%20158.727241%20136.053825%20%22%20transform%3D%22matrix%280.996812%2C%200%2C%200%2C%20-0.996812%2C%2018.825711%2C%20221.182539%29%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-6%29%22%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%2019.222656%20221.183594%20C%2019.222656%20220.964844%2019.046875%20220.785156%2018.824219%20220.785156%20C%2018.605469%20220.785156%2018.429688%20220.964844%2018.429688%20221.183594%20C%2018.429688%20221.402344%2018.605469%20221.578125%2018.824219%20221.578125%20C%2019.046875%20221.578125%2019.222656%20221.402344%2019.222656%20221.183594%20Z%20M%2019.222656%20221.183594%20%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-0%22%20x%3D%224.24136%22%20y%3D%22217.095611%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-7%29%22%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20324.378906%20221.183594%20C%20324.378906%20220.964844%20324.199219%20220.785156%20323.980469%20220.785156%20C%20323.761719%20220.785156%20323.582031%20220.964844%20323.582031%20221.183594%20C%20323.582031%20221.402344%20323.761719%20221.578125%20323.980469%20221.578125%20C%20324.199219%20221.578125%20324.378906%20221.402344%20324.378906%20221.183594%20Z%20M%20324.378906%20221.183594%20%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-1%22%20x%3D%22328.064598%22%20y%3D%22217.095611%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20256.566406%2017.746094%20C%20256.566406%2017.527344%20256.386719%2017.347656%20256.167969%2017.347656%20C%20255.949219%2017.347656%20255.773438%2017.527344%20255.773438%2017.746094%20C%20255.773438%2017.964844%20255.949219%2018.144531%20256.167969%2018.144531%20C%20256.386719%2018.144531%20256.566406%2017.964844%20256.566406%2017.746094%20Z%20M%20256.566406%2017.746094%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-2%22%20x%3D%22260.253495%22%20y%3D%2213.661304%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20301.761719%20153.375%20C%20301.761719%20153.152344%20301.582031%20152.976562%20301.363281%20152.976562%20C%20301.144531%20152.976562%20300.96875%20153.152344%20300.96875%20153.375%20C%20300.96875%20153.59375%20301.144531%20153.769531%20301.363281%20153.769531%20C%20301.582031%20153.769531%20301.761719%20153.59375%20301.761719%20153.375%20Z%20M%20301.761719%20153.375%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-3%22%20x%3D%22305.447939%22%20y%3D%22149.286501%22%2F%3E%3C%2Fg%3E%3Cg%20clip-path%3D%22url%28%23clip-8%29%22%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20120.9375%20221.183594%20C%20120.9375%20220.964844%20120.757812%20220.785156%20120.539062%20220.785156%20C%20120.320312%20220.785156%20120.140625%20220.964844%20120.140625%20221.183594%20C%20120.140625%20221.402344%20120.320312%20221.578125%20120.539062%20221.578125%20C%20120.757812%20221.578125%20120.9375%20221.402344%20120.9375%20221.183594%20Z%20M%20120.9375%20221.183594%20%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-4%22%20x%3D%22105.953031%22%20y%3D%22217.095611%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20177.445312%2085.5625%20C%20177.445312%2085.34375%20177.265625%2085.167969%20177.046875%2085.167969%20C%20176.828125%2085.167969%20176.648438%2085.34375%20176.648438%2085.5625%20C%20176.648438%2085.785156%20176.828125%2085.960938%20177.046875%2085.960938%20C%20177.265625%2085.960938%20177.445312%2085.785156%20177.445312%2085.5625%20Z%20M%20177.445312%2085.5625%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-5%22%20x%3D%22164.400086%22%20y%3D%2281.478388%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20140.308594%20192.121094%20C%20140.308594%20191.902344%20140.128906%20191.726562%20139.910156%20191.726562%20C%20139.691406%20191.726562%20139.511719%20191.902344%20139.511719%20192.121094%20C%20139.511719%20192.339844%20139.691406%20192.519531%20139.910156%20192.519531%20C%20140.128906%20192.519531%20140.308594%20192.339844%20140.308594%20192.121094%20Z%20M%20140.308594%20192.121094%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-6%22%20x%3D%22125.324072%22%20y%3D%22188.035561%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20261.398438%20163.0625%20C%20261.398438%20162.839844%20261.21875%20162.664062%20261%20162.664062%20C%20260.78125%20162.664062%20260.601562%20162.839844%20260.601562%20163.0625%20C%20260.601562%20163.28125%20260.78125%20163.457031%20261%20163.457031%20C%20261.21875%20163.457031%20261.398438%20163.28125%20261.398438%20163.0625%20Z%20M%20261.398438%20163.0625%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-7%22%20x%3D%22255.748903%22%20y%3D%22158.974514%22%2F%3E%3C%2Fg%3E%3Cpath%20fill-rule%3D%22nonzero%22%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%20d%3D%22M%20198.429688%20104.941406%20C%20198.429688%20104.722656%20198.253906%20104.542969%20198.03125%20104.542969%20C%20197.8125%20104.542969%20197.636719%20104.722656%20197.636719%20104.941406%20C%20197.636719%20105.160156%20197.8125%20105.339844%20198.03125%20105.339844%20C%20198.253906%20105.339844%20198.429688%20105.160156%20198.429688%20104.941406%20Z%20M%20198.429688%20104.941406%20%22%2F%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-0-8%22%20x%3D%22202.118442%22%20y%3D%22109.829705%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-1-0%22%20x%3D%2283.166913%22%20y%3D%22214.062313%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-1-1%22%20x%3D%22201.133592%22%20y%3D%2271.989738%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-1-2%22%20x%3D%22189.718105%22%20y%3D%22154.784914%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-1-3%22%20x%3D%22284.865771%22%20y%3D%22183.345562%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-1-4%22%20x%3D%2297.854933%22%20y%3D%22167.203194%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-1-5%22%20x%3D%22249.300528%22%20y%3D%2292.974617%22%2F%3E%3C%2Fg%3E%3Cg%20fill%3D%22rgb%280%25%2C%200%25%2C%200%25%29%22%20fill-opacity%3D%221%22%3E%3Cuse%20xlink%3Ahref%3D%22%23glyph-1-6%22%20x%3D%22224.283546%22%20y%3D%22210.791774%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E" class="tikzpicture" /></p>
<p>Since triangles <span class="math inline">\(ABC\)</span>, <span class="math inline">\(ACX\)</span> , and <span class="math inline">\(ABX\)</span> share the same heigth, we can write
<span class="math display">\[
a+b+f = \alpha S.
\]</span>
By the same reasoning we obtain similar expressions:
<span class="math display">\[\begin{align*}
a+b+f &amp;= \alpha S\\
b+c+e &amp;= \alpha S\\
c+a+d &amp;= \alpha S
\end{align*}\]</span>
Obviously,
<span class="math display">\[
S = a + b + c + d + e + f + g.
\]</span></p>
<p>We have only <span class="math inline">\(4\)</span> equations for <span class="math inline">\(7\)</span> variables (assuming that <span class="math inline">\(S\)</span> is a given); one can show that they are not sufficient to find <span class="math inline">\(g\)</span>.</p>
<p>However, we can observe that
<span class="math display">\[
\frac {CY}{CW} = \frac{b+e+f+g}{b+e},\]</span>
therefore, since the triangles <span class="math inline">\(ACY\)</span> and <span class="math inline">\(ZCW\)</span> share an angle,
<span class="math display">\[
\frac{a+c+d}{c} = \frac {AC}{ZC} \cdot \frac{CY}{CW} = \frac 1 \alpha\frac{b+e+f+g}{b+e}
\]</span>
We simplify using <span class="math inline">\(a+b+c = \alpha S = b +c +e\)</span>:
<span class="math display">\[
\frac{\alpha S}{c} = \frac 1 \alpha \left(1+\frac{f+g}{\alpha S - c}\right)
\]</span>
Since
<span class="math display">\[
f+g +\alpha S = f + g + a + d + c = (f + g + a + d) + c = (1 - \alpha )S + c
\]</span>
we can further simplify to get
<span class="math display">\[
\frac{\alpha S}{c} = \frac 1 \alpha \left(1+\frac{(1-2\alpha )S  + c}{\alpha S - c}\right) =
\frac 1 \alpha \frac{(1-\alpha )S }{\alpha S - c} 
\]</span>
and hence</p>
<p><span class="math display">\[
\alpha^2 S(\alpha S - c) = (1-\alpha )Sc ,
\]</span>
which gives</p>
<p><span class="math display">\[
c = \frac {\alpha^3} {1-\alpha + \alpha^2}S.
\]</span></p>
<p>Note that by the symmetry of the problem we get to say that
<span class="math display">\[
a = b = c = \frac {\alpha^3} {1-\alpha + \alpha^2}S,
\]</span>
and therefore
<span class="math display">\[
d = e = f = \alpha S - 2 a
\]</span>
Finally,
<span class="math display">\[
g = S - 3a - 3 d = S - 3a - 3 (\alpha S - 2 a) = S - 3 \alpha S + 3 a = S - 3 \alpha S + 3\frac {\alpha^3} {1-\alpha + \alpha^2}S.
\]</span></p>
<p><span class="math display">\[
\frac gS = \frac{{1-\alpha + \alpha^2} -3\alpha {1-\alpha + \alpha^2} + 3\alpha^3 }{1-\alpha + \alpha^2} = 
\frac{(1-2\alpha)^2}{1-\alpha + \alpha^2}.
\]</span></p>
<p>A quick sanity check: if <span class="math inline">\(\alpha = 0\)</span>, then <span class="math inline">\(g = S\)</span> (the triangle <span class="math inline">\(UVW\)</span> is equal to the trianlge <span class="math inline">\(ABC\)</span>). Similarly, if <span class="math inline">\(\alpha = \frac 12\)</span>, then the trianlge <span class="math inline">\(UVW\)</span> degenerates to a point (medians have a common point of intesection).</p>
<p>Finally, the initial problem asked for <span class="math inline">\(\alpha = \frac 13\)</span>. The answer is then <span class="math inline">\(\frac gS = \frac 1 7\)</span>.</p>
<h3 id="followup-2024-11-22">Followup (2024-11-22)</h3>
<p>We can further relax the condtions that the ratios are the same:
let us suppose that</p>
<p><span class="math display">\[
\frac{BX}{BC} = \alpha;\quad  \frac {CZ}{CA} = \beta;\quad \frac {AY} {AB} = \gamma.
\]</span></p>
<p>We can still write the same system of equations for the triangles <span class="math inline">\(ACY\)</span> and <span class="math inline">\(ZCW\)</span>:</p>
<p><span class="math display">\[
\frac{a+c+d}{c} = \frac {AC}{ZC} \cdot \frac{CY}{CW} = \frac 1\beta \cdot \frac{b + e + f + g}{ b + e}
\]</span>
or, as we’ve seen before,
<span class="math display">\[
\frac{\gamma S}{c} =  \frac 1\beta \cdot \frac{(1-\gamma) S}{\beta S - c},
\]</span>
which results in
<span class="math display">\[
\beta\gamma(\beta S - c) = (1-\gamma)c
\]</span>
and finally
<span class="math display">\[
\frac c S = \frac{\beta^2\gamma}{1-\gamma + \beta\gamma}.
\]</span>
If we repeat the same reasoning for <span class="math inline">\(b\)</span> we get
<span class="math display">\[
\frac{b}{\beta S} = \alpha\frac{\alpha S - b}{(1-\beta)S},
\]</span>
which would give us
<span class="math display">\[
\frac{b}{S} = \frac{\alpha^2\beta}{1-\beta+\alpha\beta}.
\]</span>
In the same spirit
<span class="math display">\[
\frac{a}{S} = \frac{\gamma^2\alpha}{1-\alpha+\gamma\alpha}.
\]</span></p>
<p>Now to the tedious part:
<span class="math display">\[\begin{align*}
\frac d S &amp;= \gamma - \frac cS -\frac aS,\\
\frac e S &amp;= \beta - \frac bS -\frac cS,\\
\frac f S &amp;= \alpha - \frac aS -\frac bS,
\end{align*}\]</span>
so
<span class="math display">\[
\frac gS = 1 - \frac {a + b + c + d + e + g}{S} = 1 -\alpha -\beta-\gamma + \frac{a + b + c}{S}
\]</span>
<span class="math display">\[
= 1 - (\alpha + \beta + \gamma) + \frac{\gamma^2\alpha}{1-\alpha+\gamma\alpha}
+\frac{\alpha^2\beta}{1-\beta+\alpha\beta}
+
\frac{\beta^2\gamma}{1-\gamma + \beta\gamma}.
\]</span>
One can also note that
<span class="math display">\[
\frac{\gamma^2\alpha}{1-\alpha+\gamma\alpha} = \gamma- \frac{\gamma (1-\alpha)}{1-\alpha+\gamma\alpha}
\]</span>
so we continue
<span class="math display">\[
\frac gS = 1
-\frac{\gamma (1-\alpha)}{1-\alpha+\gamma\alpha}
-\frac{\alpha (1-\beta)}{1-\beta+\alpha\beta}
-\frac{\beta (1-\gamma)}{1-\gamma+\beta\gamma}.
\]</span></p>
<p>Let <span class="math inline">\(\alpha&#39; = \frac{\alpha}{1-\alpha}\)</span> (and similarly for other variables):
<span class="math display">\[
\frac gS = 1
-\frac{\gamma }{1+\gamma\alpha&#39;}
-\frac{\alpha }{1+\alpha\beta&#39;}
-\frac{\beta }{1+\beta\gamma&#39;}.
\]</span></p>
<p>Putting everything to common denominator:
<span class="math display">\[
\frac gS =  \frac{(1+\gamma\alpha&#39;)(1+\alpha\beta&#39;)(1+\beta\gamma&#39;)
-\gamma(1+\alpha\beta&#39;)(1+\beta\gamma&#39;)
-\alpha(1+\gamma\alpha&#39;)(1+\beta\gamma&#39;)
-\beta(1+\gamma\alpha&#39;)(1+\alpha\beta&#39;) }
{(1+\gamma\alpha&#39;)(1+\alpha\beta&#39;)(1+\beta\gamma&#39;)}
\]</span></p>
<p>Denote
<span class="math display">\[
D = (1+\gamma\alpha&#39;)(1+\alpha\beta&#39;)(1+\beta\gamma&#39;)
\]</span></p>
<p>to get
<span class="math display">\[\begin{align*}
\frac {gD}S &amp;= 1 + \underline{\gamma \alpha&#39;} + \alpha\beta&#39; + \beta\gamma&#39; + \underline{\alpha\gamma\alpha&#39;\beta&#39;} + \alpha\beta\beta&#39;\gamma&#39;+\beta\gamma\alpha&#39;\gamma&#39; + \alpha\beta\gamma\alpha&#39;\beta&#39;\gamma&#39;\\
&amp;-(\gamma +\alpha\beta&#39;\gamma&#39; + \beta\gamma\gamma&#39; + \alpha\beta\gamma\beta&#39;\gamma&#39;)\\
&amp;-(\alpha +\alpha\beta\gamma&#39; + \underline{\alpha\gamma\alpha&#39;} + \alpha\beta\gamma\alpha&#39;\gamma&#39;)\\
&amp;-(\beta +\alpha&#39;\beta\gamma + \alpha\beta\beta&#39; + \underline{\alpha\beta\gamma\alpha&#39;\beta&#39;})
\end{align*}\]</span></p>
<p>Since <span class="math inline">\(x&#39;(1-x) = x\)</span>, the underlined terms simplify (we will implicitly make the same conversion for other combinations later):
<span class="math display">\[
{\gamma \alpha&#39;} - {\alpha\gamma\alpha&#39;} = \gamma\alpha&#39;(1-\alpha) = \alpha\gamma\alpha&#39;
\]</span>
<span class="math display">\[
{\alpha\gamma\alpha&#39;\beta&#39;} - \alpha\beta\gamma\alpha&#39;\beta&#39; = \alpha\beta\gamma\alpha&#39;
\]</span>
This observation allows us to continue
<span class="math display">\[\begin{align*}
\frac {gD}S &amp;= 1 + \gamma \alpha + \alpha\beta + \beta\gamma + \alpha\beta\gamma (\alpha&#39;+\beta&#39;+\gamma&#39;)+\alpha\beta\gamma\alpha&#39;\beta&#39;\gamma&#39;\\
&amp;-(\alpha+\beta+\gamma +\alpha&#39;\beta\gamma+\alpha\beta&#39;\gamma+\alpha\beta\gamma&#39;)
\end{align*}\]</span>
and
<span class="math display">\[\begin{align*}
\frac {gD}S &amp;= 1 + \gamma \alpha + \alpha\beta + \beta\gamma - (\alpha+\beta+\gamma)+\alpha\beta\gamma\alpha&#39;\beta&#39;\gamma&#39;\\
&amp;+ \alpha&#39;\beta\gamma(\alpha-1)+ \alpha\beta&#39;\gamma(\beta-1)+ \alpha\beta\gamma&#39;(\gamma-1)
\end{align*}\]</span>
<span class="math display">\[
 = 1 + \gamma \alpha + \alpha\beta + \beta\gamma - (\alpha+\beta+\gamma)+\alpha\beta\gamma\alpha&#39;\beta&#39;\gamma&#39;
- 3\alpha\beta\gamma
\]</span>
The final expression the writes
<span class="math display">\[
\frac gS =\frac{1 + \gamma \alpha + \alpha\beta + \beta\gamma - (\alpha+\beta+\gamma)+\alpha\beta\gamma\alpha&#39;\beta&#39;\gamma&#39;
- 3\alpha\beta\gamma}{(1+\gamma\alpha&#39;)(1+\alpha\beta&#39;)(1+\beta\gamma&#39;)
}
\]</span>
(I do not know whether we can get another, more interesting form of this expression).</p>
<h4 id="sanity-check">Sanity check</h4>
<p>If <span class="math inline">\(\alpha = \beta = \gamma = \frac 12\)</span>
we have <span class="math inline">\(\alpha&#39; = \beta&#39; = \gamma&#39; = 1\)</span> and
<span class="math display">\[
\frac{g}{S} = \frac{1 + 3/4 - 3/2 + 1/8 - 3/8}{27/8} = 0
\]</span></p>
<p>Similarly, if <span class="math inline">\(\alpha = \beta = \gamma = 0\)</span> we get <span class="math inline">\(\alpha&#39; = \beta&#39; = \gamma&#39; = 0\)</span>
and
<span class="math display">\[
\frac{g}{S} = 1
\]</span></p>
<p>Finally, if <span class="math inline">\(\alpha = \beta = \gamma = \frac 13\)</span> we have <span class="math inline">\(\alpha&#39; = \beta&#39; = \gamma&#39; = \frac 12\)</span> and
<span class="math display">\[
\frac{g}{S} = \frac{1 + 3/9 - 3/3 + 1/8\cdot 1/27 - 3/27}{(7/6)^3} = \frac{6^3}{7^3}\frac{72 + 1 - 24}{6^3} = \frac17
\]</span></p>
<p>In a more general sence, we can write for the case <span class="math inline">\(\alpha = \beta = \gamma\)</span>
<span class="math display">\[
\frac{g}{S} = \frac{1 + 3 \alpha^2-3\alpha +\alpha^3\left(\frac{\alpha}{1-\alpha}\right)^3
- 3\alpha^3}{\left(1+\frac{\alpha^2}{1-\alpha}\right)^3}
\]</span>
<span class="math display">\[
 = \frac
{(1  - 3\alpha + 3 \alpha^2 -\alpha^3 - 2\alpha^3)(1-\alpha)^3 + \alpha^6}
{\left(1 - \alpha +\alpha^2\right)^3}
\]</span></p>
<p><span class="math display">\[
 = \frac
{(1-\alpha)^6  - 2\alpha^3(1-\alpha)^3 + \alpha^6}
{\left(1 - \alpha +\alpha^2\right)^3}
\]</span></p>
<p><span class="math display">\[
 = \frac
{\left((1-\alpha)^3 -  \alpha^3\right)^2}
{\left(1 - \alpha +\alpha^2\right)^3}
\]</span></p>
<p><span class="math display">\[
 = \frac
{\left((1-2\alpha)((1-\alpha)^2 +  \alpha(1-\alpha) + \alpha^2 )\right)^2}
{\left(1 - \alpha +\alpha^2\right)^3}
\]</span></p>
<p><span class="math display">\[
 = \frac
{\left((1-2\alpha)(1 - \alpha + \alpha^2)\right)^2}
{\left(1 - \alpha +\alpha^2\right)^3}
\]</span></p>
<p><span class="math display">\[
 = \frac
{(1-2\alpha)^2}
{1 - \alpha +\alpha^2}
\]</span>
which confirms our previous result.</p>
]]></description>
    <pubDate>Sat, 19 Oct 2024 00:00:00 UT</pubDate>
    <guid>shrykewindgrace.github.io/posts/Seventh.html</guid>
    <dc:creator>Shryke Windgrace</dc:creator>
</item>
<item>
    <title>SelectT monad transformer and its laws</title>
    <link>shrykewindgrace.github.io/posts/SelectT.html</link>
    <description><![CDATA[<div class="info">
    Posted on May 17, 2024
    
        by me
    
</div>
<div class="info">
    
    Tags: <a title="All pages tagged &#39;Haskell&#39;." href="/tags/Haskell.html" rel="tag">Haskell</a>
    
</div>
<h2 id="motivation">Motivation</h2>
<p>Quite some time ago I learned about positive and negative argument positions and their relation with <code>Functor</code> instances.
As an exercise I tried writing a <code>Functor</code> instance for the following type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">ARA</span> r a <span class="ot">=</span> <span class="dt">ARA</span> {<span class="ot">runAra ::</span> (a <span class="ot">-&gt;</span> r) <span class="ot">-&gt;</span> a}</span></code></pre></div>
<p>While this instance and the corresponding laws are rather straightforward, <code>Applicative</code> and <code>Monad</code> instances proved to be much more complicated.
After a bit of googling, I found that this type has a name and can even made into a monad tranformer; moreover, it exists in <a href="https://www.stackage.org/haddock/lts-22.21/transformers-0.6.1.0/Control-Monad-Trans-Select.html#t:SelectT">transformers</a></p>
<h2 id="generic-definition">Generic definition</h2>
<p>Up to order of declarations, a more generic datatype becomes</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">SelectT</span> m r a <span class="ot">=</span> <span class="dt">SelectT</span> {<span class="ot">runSelectT ::</span> (a <span class="ot">-&gt;</span> m r) <span class="ot">-&gt;</span> m a}</span></code></pre></div>
<p>Perhaps unsurprisingly, when I introduced additional type parameter <code>m</code>, the <code>Monad</code> instance became <em>easier</em> to write.
Simply because the nimber of possible operations to apply got severely restricted.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">instance</span> <span class="dt">Functor</span> m <span class="ot">=&gt;</span> <span class="dt">Functor</span> (<span class="dt">SelectT</span> m r) <span class="kw">where</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ot">    fmap ::</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> <span class="dt">SelectT</span> m r a <span class="ot">-&gt;</span> <span class="dt">SelectT</span> m r b</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fmap</span> ab (<span class="dt">SelectT</span> op) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        ab <span class="op">&lt;$&gt;</span> op (bmr <span class="op">.</span> ab)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">instance</span> <span class="dt">Monad</span> m <span class="ot">=&gt;</span> <span class="dt">Applicative</span> (<span class="dt">SelectT</span> m r) <span class="kw">where</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ot">    pure ::</span> a <span class="ot">-&gt;</span> <span class="dt">SelectT</span> m r a</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pure</span> x <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \_ <span class="ot">-&gt;</span> <span class="fu">pure</span> x</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ot">    liftA2 ::</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> c) <span class="ot">-&gt;</span> <span class="dt">SelectT</span> m r a <span class="ot">-&gt;</span> <span class="dt">SelectT</span> m r b <span class="ot">-&gt;</span> <span class="dt">SelectT</span> m r c</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    liftA2 <span class="ot">=</span> liftM2</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">instance</span> <span class="dt">Monad</span> m <span class="ot">=&gt;</span> <span class="dt">Monad</span> (<span class="dt">SelectT</span> m r) <span class="kw">where</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ot">    (&gt;&gt;=) ::</span> <span class="dt">SelectT</span> m r a <span class="ot">-&gt;</span> (a <span class="ot">-&gt;</span> <span class="dt">SelectT</span> m r b) <span class="ot">-&gt;</span> <span class="dt">SelectT</span> m r b</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">SelectT</span> op <span class="op">&gt;&gt;=</span> f <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> pick x <span class="ot">=</span> runSelectT (f x) bmr</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        y <span class="ot">&lt;-</span> op (pick <span class="op">&gt;=&gt;</span> bmr)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        pick y</span></code></pre></div>
<h2 id="laws-and-proofs">Laws and proofs</h2>
<h3 id="functor-laws">Functor laws</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fmap</span><span class="ot"> ::</span> <span class="dt">Functor</span> m <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> <span class="dt">SelectT</span> m r a <span class="ot">-&gt;</span> <span class="dt">SelectT</span> m r b</span></code></pre></div>
<h4 id="first-law">First law</h4>
<p>As I said before, it is rather straightforward. In pseudo-haskell we can write by definition</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fmap</span> <span class="fu">id</span> (<span class="dt">SelectT</span> op) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \amr <span class="ot">-&gt;</span> <span class="fu">id</span> <span class="op">&lt;$&gt;</span> op (amr <span class="op">.</span> <span class="fu">id</span>)</span></code></pre></div>
<p>which, by applying functor laws to inner <code>Functor m</code> and recalling that <code>amr . id = amr</code>, we rewrite as</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fmap</span> <span class="fu">id</span> (<span class="dt">SelectT</span> op) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \amr <span class="ot">-&gt;</span> op amr <span class="ot">=</span> <span class="dt">SelectT</span> op</span></code></pre></div>
<p>And the first law is proven.</p>
<h4 id="second-law">Second law</h4>
<p>Just a little more difficult, but easy nonetheless. We use the second law for the inner functor <code>m</code> and the associativity of function composition.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fmap</span> bc ( <span class="fu">fmap</span> ab (<span class="dt">SelectT</span> op)) <span class="ot">=</span> <span class="fu">fmap</span> bc ( <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> ab <span class="op">&lt;$&gt;</span> op (bmr <span class="op">.</span> ab) )</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> bc <span class="op">&lt;$&gt;</span> (\z <span class="ot">-&gt;</span> ab <span class="op">&lt;$&gt;</span> op (z <span class="op">.</span> ab)) (cmr <span class="op">.</span> bc)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> bc <span class="op">&lt;$&gt;</span> ( ab <span class="op">&lt;$&gt;</span> op ((cmr <span class="op">.</span> bc) <span class="op">.</span> ab))</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> (bc <span class="op">.</span> ab) <span class="op">&lt;$&gt;</span> op (cmr <span class="op">.</span> (bc <span class="op">.</span> ab))</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="ot">=</span> <span class="fu">fmap</span> (bc <span class="op">.</span> ab) (<span class="dt">SelectT</span> op)</span></code></pre></div>
<p>and the second law is proven, too.</p>
<h3 id="monad-laws">Monad laws</h3>
<h4 id="left-identity">Left identity</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pure</span> a <span class="op">&gt;&gt;=</span> k <span class="ot">=</span> k a</span></code></pre></div>
<p>In our case this becomes (recall that <code>pure x = SelectT $ \_ -&gt; pure x</code>)</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pure</span> a <span class="op">&gt;&gt;=</span> f <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> pick x <span class="ot">=</span> runSelectT (f x) bmr</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>        y <span class="ot">&lt;-</span> (\_ <span class="ot">-&gt;</span> <span class="fu">pure</span> a) (pick <span class="op">&gt;=&gt;</span> bmr)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>        pick y</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pure</span> a <span class="op">&gt;&gt;=</span> f <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> pick x <span class="ot">=</span> runSelectT (f x) bmr</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        y <span class="ot">&lt;-</span> <span class="fu">pure</span> a</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        pick y</span></code></pre></div>
<p>by left identity law for <code>m</code> we get</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pure</span> a <span class="op">&gt;&gt;=</span> f <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> pick x <span class="ot">=</span> runSelectT (f x) bmr</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>        pick a</span></code></pre></div>
<p>and then</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pure</span> a <span class="op">&gt;&gt;=</span> f <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>        runSelectT (f a) bmr</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pure</span> a <span class="op">&gt;&gt;=</span> f <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> runSelectT (f a) <span class="ot">=</span> f a</span></code></pre></div>
<h4 id="right-identity">Right identity</h4>
<div class="sourceCode" id="cb16"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> <span class="fu">pure</span> <span class="ot">=</span> m</span></code></pre></div>
<p>We write it as</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dt">SelectT</span> op <span class="op">&gt;&gt;=</span> <span class="fu">pure</span> <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> pick x <span class="ot">=</span> runSelectT (<span class="fu">pure</span> x) bmr</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> op (pick <span class="op">&gt;=&gt;</span> bmr)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    pick y</span></code></pre></div>
<p>We plug in the definition of <code>pure</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>runSelectT (<span class="fu">pure</span> x) bmr <span class="ot">=</span> runSelectT (<span class="dt">SelectT</span> <span class="op">$</span> \_ <span class="ot">-&gt;</span> <span class="fu">pure</span> x) bmr <span class="ot">=</span> <span class="fu">pure</span> x</span></code></pre></div>
<p>to obtain</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="dt">SelectT</span> op <span class="op">&gt;&gt;=</span> <span class="fu">pure</span> <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> pick x <span class="ot">=</span> <span class="fu">pure</span> x</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> op (pick <span class="op">&gt;=&gt;</span> bmr)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    pick y</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="dt">SelectT</span> op <span class="op">&gt;&gt;=</span> <span class="fu">pure</span> <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> op (<span class="fu">pure</span> <span class="op">&gt;=&gt;</span> bmr)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pure</span> y</span></code></pre></div>
<p>Right and left identity laws for <code>m</code> give us</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">SelectT</span> op <span class="op">&gt;&gt;=</span> <span class="fu">pure</span> <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> op bmr</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pure</span> y</span></code></pre></div>
<p>and then</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="dt">SelectT</span> op <span class="op">&gt;&gt;=</span> <span class="fu">pure</span> <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> op bmr <span class="ot">=</span> <span class="dt">Select</span> op</span></code></pre></div>
<p>and the law is proven.</p>
<h4 id="final-boss-associativity-law">Final boss, associativity law</h4>
<p><code>m &gt;&gt;= (\x -&gt; k x &gt;&gt;= h) = (m &gt;&gt;= k) &gt;&gt;= h</code></p>
<p>Stay tuned!</p>
<p>In order to simplify notations, let’s introduce an operator</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>[]<span class="ot"> ::</span> <span class="dt">SelectT</span> m r a <span class="ot">-&gt;</span> (a <span class="ot">-&gt;</span> m r) <span class="ot">-&gt;</span> m a</span></code></pre></div>
<p>It overrides Haskell’s syntax for lists, but we do not use lists anywhere in this post, so this should be fine.</p>
<p>We can write the monad instance as</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> f <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> pick x <span class="ot">=</span> [f x] bmr</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ((<span class="op">&gt;&gt;=</span> bmr) <span class="op">.</span> pick)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    pick y</span></code></pre></div>
<p>With that in mind, we write</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> k x <span class="op">&gt;&gt;=</span> h) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p1 <span class="ot">=</span> \a <span class="ot">-&gt;</span> [k a <span class="op">&gt;&gt;=</span> h] cmr <span class="co">-- :: a -&gt; m c</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p1)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    p1 y</span></code></pre></div>
<p>After that we plug in the definition of <code>[k a &gt;&gt;= h]</code>:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> k x <span class="op">&gt;&gt;=</span> h) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p1 <span class="ot">=</span> \a <span class="ot">-&gt;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>        [<span class="dt">SelectT</span> <span class="op">$</span> \zmr <span class="ot">-&gt;</span> <span class="kw">let</span> p2 b <span class="ot">=</span> [h b] zmr <span class="kw">in</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>            ([k a] ((<span class="op">&gt;&gt;=</span> zmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> p2] cmr</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p1)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    p1 y</span></code></pre></div>
<p>Since <code>[]</code> in our notation is just unwrapping the <code>SelectT</code> constructor, we simplify as</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> k x <span class="op">&gt;&gt;=</span> h) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p1 <span class="ot">=</span> \a <span class="ot">-&gt;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr <span class="kw">in</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>            ([k a] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> p2</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p1)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    p1 y</span></code></pre></div>
<p>Let’s keep <code>p2</code> there for now and inline only <code>p1</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">=</span> \a <span class="ot">-&gt;</span> ([k a] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> p2</span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> k x <span class="op">&gt;&gt;=</span> h) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> (\a <span class="ot">-&gt;</span> ([k a] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> p2) )</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    ([k y] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2))) <span class="op">&gt;&gt;=</span> p2</span></code></pre></div>
<p>Rewrite the definition of <code>y</code>:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> k x <span class="op">&gt;&gt;=</span> h) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ( \a <span class="ot">-&gt;</span> (([k a] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> p2) <span class="op">&gt;&gt;=</span> cmr)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    ([k y] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2))) <span class="op">&gt;&gt;=</span> p2</span></code></pre></div>
<p>One could notice the parts of the third monad for the underlying monad in the expression <code>((...) &gt;&gt;= p2) &gt;&gt;= cmr</code>,
we definitely should use that.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> k x <span class="op">&gt;&gt;=</span> h) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ( \a <span class="ot">-&gt;</span> (([k a] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> p2 x <span class="op">&gt;&gt;=</span> cmr ) ))</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    ([k y] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2))) <span class="op">&gt;&gt;=</span> p2</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> k x <span class="op">&gt;&gt;=</span> h) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ( \a <span class="ot">-&gt;</span> (([k a] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> p2 x <span class="op">&gt;&gt;=</span> cmr ) ))</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> [k y] ( (<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2) </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    p2 z</span></code></pre></div>
<p>or even</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> k x <span class="op">&gt;&gt;=</span> h) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ( \a <span class="ot">-&gt;</span> ([k a] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> ((<span class="op">&gt;&gt;=</span> cmr ) <span class="op">.</span> p2) )</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> [k y] ( (<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2) </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    p2 z</span></code></pre></div>
<p>Now, let’s write the other part of the law:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(m <span class="op">&gt;&gt;=</span> k) <span class="op">&gt;&gt;=</span> h <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> [m <span class="op">&gt;&gt;=</span> k] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    p2 z</span></code></pre></div>
<p>Plug the definition of <code>m &gt;&gt;= k</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(m <span class="op">&gt;&gt;=</span> k) <span class="op">&gt;&gt;=</span> h <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> [<span class="dt">SelectT</span> <span class="op">$</span> \bmr <span class="ot">-&gt;</span> <span class="kw">let</span> p1 a <span class="ot">=</span> [k a] bmr <span class="kw">in</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>        ([m] ((<span class="op">&gt;&gt;=</span> bmr) <span class="op">.</span> p1)) <span class="op">&gt;&gt;=</span> p1 ] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    p2 z</span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(m <span class="op">&gt;&gt;=</span> k) <span class="op">&gt;&gt;=</span> h <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> <span class="kw">let</span> p1 a <span class="ot">=</span> [k a] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2) <span class="kw">in</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>        ([m] ((<span class="op">&gt;&gt;=</span> (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">.</span> p1)) <span class="op">&gt;&gt;=</span> p1  </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    p2 z</span></code></pre></div>
<p>Scared? I am, too. Anyways,</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(m <span class="op">&gt;&gt;=</span> k) <span class="op">&gt;&gt;=</span> h <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p1 a <span class="ot">=</span> [k a] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> ([m] ((<span class="op">&gt;&gt;=</span> (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">.</span> p1)) <span class="op">&gt;&gt;=</span> p1</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    p2 z</span></code></pre></div>
<p>rewrite that dangling <code>&gt;&gt;= p1</code></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>(m <span class="op">&gt;&gt;=</span> k) <span class="op">&gt;&gt;=</span> h <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p1 a <span class="ot">=</span> [k a] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ((<span class="op">&gt;&gt;=</span> (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">.</span> p1)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> p1 y</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    p2 z</span></code></pre></div>
<p>and inline <code>p1</code> once:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(m <span class="op">&gt;&gt;=</span> k) <span class="op">&gt;&gt;=</span> h <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p1 a <span class="ot">=</span> [k a] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ((<span class="op">&gt;&gt;=</span> (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">.</span> p1)</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> [k y] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    p2 z</span></code></pre></div>
<p>Getting something already! Now off to inline the last mention of <code>p1</code>:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>  (<span class="op">&gt;&gt;=</span> (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">.</span> p1</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="ot">=</span> \a <span class="ot">-&gt;</span> p1 a <span class="op">&gt;&gt;=</span> (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="ot">=</span> \a <span class="ot">-&gt;</span> ([k a] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)</span></code></pre></div>
<p>Putting this back:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(m <span class="op">&gt;&gt;=</span> k) <span class="op">&gt;&gt;=</span> h <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p1 a <span class="ot">=</span> [k a] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ( \a <span class="ot">-&gt;</span> ([k a] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2) )</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> [k y] (( <span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    p2 z</span></code></pre></div>
<p>Recall that we already wrote that once:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;&gt;=</span> (\x <span class="ot">-&gt;</span> k x <span class="op">&gt;&gt;=</span> h) <span class="ot">=</span> <span class="dt">SelectT</span> <span class="op">$</span> \cmr <span class="ot">-&gt;</span> <span class="kw">do</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> p2 <span class="ot">=</span> \b <span class="ot">-&gt;</span> [h b] cmr</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> [m] ( \a <span class="ot">-&gt;</span> ([k a] ((<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2)) <span class="op">&gt;&gt;=</span> ((<span class="op">&gt;&gt;=</span> cmr ) <span class="op">.</span> p2) )</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> [k y] ( (<span class="op">&gt;&gt;=</span> cmr) <span class="op">.</span> p2) </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    p2 z</span></code></pre></div>
<p>and therefore our arduous work is done, and indeed the third monad law holds for <code>Select m r</code>!</p>
]]></description>
    <pubDate>Fri, 17 May 2024 00:00:00 UT</pubDate>
    <guid>shrykewindgrace.github.io/posts/SelectT.html</guid>
    <dc:creator>Shryke Windgrace</dc:creator>
</item>
<item>
    <title>Unicode input, keyboards, and windows</title>
    <link>shrykewindgrace.github.io/posts/UnicodeInput.html</link>
    <description><![CDATA[<div class="info">
    Posted on November 20, 2023
    
        by me
    
</div>
<div class="info">
    
    Tags: <a title="All pages tagged &#39;QMK&#39;." href="/tags/QMK.html" rel="tag">QMK</a>, <a title="All pages tagged &#39;hardware&#39;." href="/tags/hardware.html" rel="tag">hardware</a>, <a title="All pages tagged &#39;unicode&#39;." href="/tags/unicode.html" rel="tag">unicode</a>, <a title="All pages tagged &#39;windows&#39;." href="/tags/windows.html" rel="tag">windows</a>
    
</div>
<h2 id="unicode-input-and-programmable-keyboards">Unicode input and programmable keyboards</h2>
<p>One of selling points of programmable keyboards are <code>macros</code> - sequences of keytaps sent to the host machine triggered by a smaller number of taps on the keyboard.</p>
<p>I took a Moonlander keyboard, running on a (subset of) QMK firmware, but most points apply to all QMK-based builds.</p>
<p>I also prefer to use Oryx, a WYSIWYG configurator for ZSA’s keyboards.</p>
<p>The goals of the exercise is to input French characters like <code>çéèêëîïôæœüûàù</code> without much trouble,
preferrably with a single keystroke. The host machine is a Win10.</p>
<p>Without further ado, here are the methods that I found.</p>
<h3 id="alt-codes">Alt codes</h3>
<p>There is an always-on functionality that would allow entering unicode with <code>Alt</code> and numpad: for example, switch to a <code>US</code> layout, hold <code>Alt</code> and hit <code>0,2,3,1</code> on numpad, you will get a <code>ç</code> character.
This method, however, comes with a giant imitation - not all software handle these sequences correctly. MS Office suite has some issues, with no clear way to fix them. On top of that, these issues are <strong>very</strong> annoying.</p>
<p>My personal beef is with Outlook. Start writing a new email in French. Input any such macro (e.g. <code>Alt+0231</code>), see <code>ç</code> appear - so far, so good. Now hit another key (e.g. <code>a</code>) - and voilà, another copy of <code>ç</code> appears instead!</p>
<p>For words like <code>"généré"</code> (“generated”) the outcome is mangled beyond recognition.</p>
<p>Also, this method is language-specific. And as you might have guessed, requires <code>NumLock on</code>.</p>
<h3 id="alt-hex-codes">Alt Hex codes</h3>
<ul>
<li>this windows feature is hidden behind a registry flag</li>
<li>if I am not mistaken, these codes follow <code>win1252</code>, not unicode.</li>
<li>the macros are too long; hardcoding them in Oryx is even more tedious (and some codes do not fit Oryx limitations!)</li>
</ul>
<p>I did not try this approach.</p>
<h3 id="altx">Alt+X</h3>
<p>A rather limited set of software supports this method: enter the hex value of the character, hit <code>alt+x</code>, the code is replaced by the character. To my knowledge, only MS Office suite supports it; I quickly discarded this approach as non-consequential.</p>
<h3 id="wincompose-approach">Wincompose approach</h3>
<p>QMK documentation recommends this method. <code>Wincompose</code> is a third-party program that triggers on a <code>compose</code> key (default is <code>ralt</code>), and then listens on consequtive keypresses; if it sees a known sequence, it outputs a corresponding character. For example, in default setting, the sequence <code>ralt, `, E</code> would produce an <code>È</code>.</p>
<p>The positive side is obvious:</p>
<ul>
<li>there is some logic in these sequences</li>
<li>macros are shorter</li>
<li>no more buggy input in Outlook!</li>
</ul>
<p>The drawbacks are quite obvious, too:</p>
<ul>
<li>this approach requires something running on the host machine</li>
<li>Oryx adds artificial delays of <code>100</code>ms; I contacted ZSA support, they are not willing to add an option to reduce this delay.</li>
</ul>
<h3 id="remapper-on-the-host">Remapper on the host</h3>
<p>This approach is similar to the previous one - run a remapper like <code>kanata</code>/<code>kmonad</code>/etc on the host machine, define layers and remappings, and since they are running on the host, you have a sure way to input unicode. I use this approach on machines that are not connected to a programmable keyboard.</p>
<h3 id="us-international-layout-with-dead-keys">US International layout with dead keys</h3>
<p>This approach works only if you are willing to limit youself to unicode characters present in this layout.</p>
<p>Pros:</p>
<ul>
<li>nothing to run on the host system, just change the OS keyboard layout</li>
<li>suddenly the unicode input from the keyboard works on linux machines, too (if they are running the same keyboard layout, of course)</li>
</ul>
<p>Cons:</p>
<ul>
<li>not everything is there; (e.g. <code>æ</code>), you will need other approaches for such characters. Admittedly, this is a rather rare thing to type in my daily life.</li>
<li><code>"`^'~</code> all become dead keys, so you’ll need macros to input them as standalone characters, and some features of QMK will become unnecessarily complicated to use (like “autoshift”).</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>Unicode input is very much a problem, often overlooked because users are willing to skip on rare characters like <code>æ</code> or because their native OS keyboard layout cover their needs.</p>
<p>Another point is that my use case is rather fringe - I want to input both pure English and French while using a single OS layout. I am not talking about entering cyrillic text, that would be an even more complex endeavor, I’ll stick with my <code>ЙЦУКЕН</code> OS layout for now.</p>
<p>Personnally, the easiest solution for me is the <code>wincompose</code> one - it requires almost no setup on the host and macros are easy to hardcode in Oryx. QMK has them built in, if I am not mistaken.</p>
<h3 id="references">References</h3>
<p><a href="https://en.wikipedia.org/wiki/Unicode_input">Unicode input, wikipedia</a></p>
<p><a href="https://en.wikipedia.org/wiki/Alt_code">Alt codes, wikipedia</a></p>
<p><a href="https://support.microsoft.com/en-us/office/insert-ascii-or-unicode-latin-based-symbols-and-characters-d13f58d3-7bcb-44a7-a4d5-972ee12e50e0">MS on entering unicode</a></p>
<p><a href="https://www.fileformat.info/tip/microsoft/enter_unicode.htm">Various flavors of alt code entering</a></p>
<p><a href="https://configure.zsa.io">Oryx</a></p>
<p><a href="https://docs.qmk.fm/#/feature_unicode">QMK documentation</a></p>
]]></description>
    <pubDate>Mon, 20 Nov 2023 00:00:00 UT</pubDate>
    <guid>shrykewindgrace.github.io/posts/UnicodeInput.html</guid>
    <dc:creator>Shryke Windgrace</dc:creator>
</item>
<item>
    <title>example post</title>
    <link>shrykewindgrace.github.io/posts/example.html</link>
    <description><![CDATA[<div class="info">
    Posted on May  2, 2023
    
        by me
    
</div>
<div class="info">
    
    Tags: <a title="All pages tagged &#39;test&#39;." href="/tags/test.html" rel="tag">test</a>, <a title="All pages tagged &#39;another&#39;." href="/tags/another.html" rel="tag">another</a>
    
</div>
<p>Mauris in lorem nisl. Maecenas tempus facilisis ante, eget viverra nisl
tincidunt et. Donec turpis lectus, mattis ac malesuada a, accumsan eu libero.
Morbi condimentum, tortor et tincidunt ullamcorper, sem quam pretium nulla, id
convallis lectus libero nec turpis. Proin dapibus nisi id est sodales nec
ultrices tortor pellentesque.</p>
<p>Vivamus vel nisi ac lacus sollicitudin vulputate
ac ut ligula. Nullam feugiat risus eget eros gravida in molestie sapien euismod.
Nunc sed hendrerit orci. Nulla mollis consequat lorem ac blandit. Ut et turpis
mauris. Nulla est odio, posuere id ullamcorper sit amet, tincidunt vel justo.
Curabitur placerat tincidunt varius. Nulla vulputate, ipsum eu consectetur
mollis, dui nibh aliquam neque, at ultricies leo ligula et arcu.</p>
]]></description>
    <pubDate>Tue, 02 May 2023 00:00:00 UT</pubDate>
    <guid>shrykewindgrace.github.io/posts/example.html</guid>
    <dc:creator>Shryke Windgrace</dc:creator>
</item>

    </channel>
</rss>
